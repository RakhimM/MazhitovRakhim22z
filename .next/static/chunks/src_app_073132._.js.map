{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/api/action/product.ts"],"sourcesContent":["// \"use server\";\r\n\r\n// import { revalidatePath } from \"next/cache\";\r\n// import { redirect } from \"next/navigation\";\r\n// import { z } from \"zod\";\r\n// import { auth } from \"~/server/auth\";\r\n// import { db } from \"~/server/db\";\r\n// import { createClient } from '@supabase/supabase-js';\r\n// export async function createProduct(formData: FormData) {\r\n//   const fd = z\r\n//     .object({\r\n//       name: z.string(),\r\n//       description: z.string(),\r\n//       price: z.coerce.number().positive(),\r\n//       imageUrl: z.string().url().optional().or(z.literal(\"\")),\r\n//       categoryId: z.string(),\r\n//     })\r\n//     .parse({\r\n//       name: formData.get(\"name\"),\r\n//       description: formData.get(\"description\"),\r\n//       price: formData.get(\"price\"),\r\n//       imageUrl: formData.get(\"imageUrl\"),\r\n//       categoryId: formData.get(\"categoryId\"),\r\n//     });\r\n\r\n//   await db.product.create({\r\n//     data: {\r\n//       name: fd.name,\r\n//       description: fd.description,\r\n//       price: fd.price,\r\n//       imageUrl: fd.imageUrl || \"\",\r\n//       categoryId: fd.categoryId,\r\n//     },\r\n//   });\r\n\r\n//   revalidatePath(\"/product\");\r\n//   redirect(\"/product\"); \r\n// }\r\n// const supabase = createClient(\r\n//   process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n//   process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n// );\r\n\r\n// // export async function createProduct(formData: FormData) {\r\n// //   const name = formData.get(\"name\") as string;\r\n// //   const description = formData.get(\"description\") as string;\r\n// //   const price = parseFloat(formData.get(\"price\") as string);\r\n// //   const categoryId = formData.get(\"categoryId\") as string;\r\n// //   const file = formData.get(\"image\") as File;\r\n\r\n// //   if (!file || file.size === 0) throw new Error(\"Файл изображения не выбран\");\r\n\r\n// //   const filePath = `products/${Date.now()}-${file.name}`;\r\n\r\n// //   // Загрузка в Supabase Storage\r\n// //   const { error: uploadError } = await supabase.storage\r\n// //     .from('product-images')\r\n// //     .upload(filePath, file, { upsert: true });\r\n\r\n// //   if (uploadError) throw uploadError;\r\n\r\n// //   const { data: imageData } = supabase\r\n// //     .storage\r\n// //     .from('product-images')\r\n// //     .getPublicUrl(filePath);\r\n\r\n// //   const imageUrl = imageData?.publicUrl;\r\n\r\n// //   if (!imageUrl) throw new Error(\"Не удалось получить URL изображения\");\r\n\r\n// //   // Сохранение в PostgreSQL\r\n// //   await db.product.create({\r\n// //     data: {\r\n// //       name,\r\n// //       description,\r\n// //       price,\r\n// //       categoryId,\r\n// //       imageUrl,\r\n// //     },\r\n// //   });\r\n\r\n// //   redirect('/admin/products'); // или куда тебе нужно\r\n// // }\r\n\r\n// export async function updateProduct(formData: FormData) {\r\n//   const data = z\r\n//     .object({\r\n//       id: z.string(),\r\n//       name: z.string(),\r\n//       description: z.string().optional(),\r\n//       price: z.coerce.number().nonnegative(),\r\n//       imageUrl: z.string().url().optional(),\r\n//       categoryId: z.string().optional(),\r\n//     })\r\n//     .parse({\r\n//       id: formData.get(\"id\"),\r\n//       name: formData.get(\"name\"),\r\n//       description: formData.get(\"description\"),\r\n//       price: formData.get(\"price\"),\r\n//       imageUrl: formData.get(\"imageUrl\"),\r\n//       categoryId: formData.get(\"categoryId\"),\r\n//     });\r\n\r\n//   await db.product.update({\r\n//     where: { id: data.id },\r\n//     data: {\r\n//       name: data.name,\r\n//       description: data.description,\r\n//       price: data.price,\r\n//       imageUrl: data.imageUrl,\r\n//       categoryId: data.categoryId,\r\n//     },\r\n//   });\r\n\r\n//   revalidatePath(`/products/${data.id}`); \r\n// }\r\n\r\n// export async function deleteProduct(formData: FormData) {\r\n//     const fd = z\r\n//       .object({\r\n//         id: z.string(),\r\n//       })\r\n//       .parse({\r\n//         id: formData.get(\"id\"),\r\n//       });\r\n//     await db.product.delete({ where: { id: fd.id } });\r\n//     redirect(\"/product\");\r\n//   }\r\n\r\n\r\n// export async function addProductCart(formData: FormData) {\r\n//   const session = await auth();\r\n\r\n//   if (!session?.user?.id) {\r\n//     throw new Error(\"Пользователь не авторизован\");\r\n//   }\r\n\r\n//   const { productId } = z\r\n//     .object({\r\n//       productId: z.string(),\r\n//     })\r\n//     .parse({\r\n//       productId: formData.get(\"productId\"),\r\n//     });\r\n\r\n//   const existingCartItem = await db.cartItem.findFirst({\r\n//     where: {\r\n//       userId: session.user.id,\r\n//       productId,\r\n//     },\r\n//   });\r\n\r\n//   if (existingCartItem) {\r\n//     await db.cartItem.update({\r\n//       where: { id: existingCartItem.id },\r\n//       data: { quantity: { increment: 1 } },\r\n//     });\r\n//   } else {\r\n//     await db.cartItem.create({\r\n//       data: {\r\n//         userId: session.user.id,\r\n//         productId,\r\n//         quantity: 1,\r\n//       },\r\n//     });\r\n//   }\r\n\r\n//    redirect(\"/cart\");\r\n// }\r\n\"use server\";\r\n\r\nimport { randomUUID } from \"crypto\";\r\nimport { revalidatePath } from \"next/cache\";\r\nimport { redirect } from \"next/navigation\";\r\nimport { z } from \"zod\";\r\nimport { auth } from \"~/server/auth\";\r\nimport { db } from \"~/server/db\";\r\n\r\n// export async function createProduct(formData: FormData) {\r\n//   const fd = z\r\n//     .object({\r\n//       name: z.string(),\r\n//       description: z.string(),\r\n//       price: z.coerce.number().positive(),\r\n//       imageUrl: z.string().url().optional().or(z.literal(\"\")),\r\n//       categoryId: z.string(),\r\n//     })\r\n//     .parse({\r\n//       name: formData.get(\"name\"),\r\n//       description: formData.get(\"description\"),\r\n//       price: formData.get(\"price\"),\r\n//       imageUrl: formData.get(\"imageUrl\"),\r\n//       categoryId: formData.get(\"categoryId\"),\r\n//     });\r\n\r\n//   await db.product.create({\r\n//     data: {\r\n//       name: fd.name,\r\n//       description: fd.description,\r\n//       price: fd.price,\r\n//       imageUrl: fd.imageUrl || \"\",\r\n//       categoryId: fd.categoryId,\r\n//     },\r\n//   });\r\n\r\n//   revalidatePath(\"/product\");\r\n//   redirect(\"/product\"); \r\n// }\r\nexport async function createProduct(formData: FormData) {\r\n  const name = formData.get(\"name\") as string;\r\n  const description = formData.get(\"description\") as string;\r\n  const price = Number(formData.get(\"price\"));\r\n  const categoryId = formData.get(\"categoryId\") as string;\r\n  const imageUrl = formData.get(\"imageUrl\") as string;\r\n\r\n  if (!imageUrl) throw new Error(\"Изображение не выбрано\");\r\n\r\n  await db.product.create({\r\n    data: {\r\n      name,\r\n      description,\r\n      price,\r\n      categoryId,\r\n      imageUrl,\r\n    },\r\n  });\r\n\r\n  redirect(\"/product\");\r\n}\r\n\r\n\r\nexport async function updateProduct(formData: FormData) {\r\n  const data = z\r\n    .object({\r\n      id: z.string(),\r\n      name: z.string(),\r\n      description: z.string().optional(),\r\n      price: z.coerce.number().nonnegative(),\r\n      imageUrl: z.string().url().optional(),\r\n      categoryId: z.string().optional(),\r\n    })\r\n    .parse({\r\n      id: formData.get(\"id\"),\r\n      name: formData.get(\"name\"),\r\n      description: formData.get(\"description\"),\r\n      price: formData.get(\"price\"),\r\n      imageUrl: formData.get(\"imageUrl\"),\r\n      categoryId: formData.get(\"categoryId\"),\r\n    });\r\n\r\n  await db.product.update({\r\n    where: { id: data.id },\r\n    data: {\r\n      name: data.name,\r\n      description: data.description,\r\n      price: data.price,\r\n      imageUrl: data.imageUrl,\r\n      categoryId: data.categoryId,\r\n    },\r\n  });\r\n\r\n  revalidatePath(`/products/${data.id}`); \r\n}\r\n\r\nexport async function deleteProduct(formData: FormData) {\r\n    const fd = z\r\n      .object({\r\n        id: z.string(),\r\n      })\r\n      .parse({\r\n        id: formData.get(\"id\"),\r\n      });\r\n    await db.product.delete({ where: { id: fd.id } });\r\n    redirect(\"/product\");\r\n  }\r\n\r\n\r\n// export async function addProductCart(formData: FormData) {\r\n//   const session = await auth();\r\n\r\n//   if (!session?.user?.id) {\r\n//     throw new Error(\"Пользователь не авторизован\");\r\n//   }\r\n\r\n//   const { productId } = z\r\n//     .object({\r\n//       productId: z.string(),\r\n//     })\r\n//     .parse({\r\n//       productId: formData.get(\"productId\"),\r\n//     });\r\n\r\n//   const existingCartItem = await db.cartItem.findFirst({\r\n//     where: {\r\n//       userId: session.user.id,\r\n//       productId,\r\n//     },\r\n//   });\r\n\r\n//   if (existingCartItem) {\r\n//     await db.cartItem.update({\r\n//       where: { id: existingCartItem.id },\r\n//       data: { quantity: { increment: 1 } },\r\n//     });\r\n//   } else {\r\n//     await db.cartItem.create({\r\n//       data: {\r\n//         userId: session.user.id,\r\n//         productId,\r\n//         quantity: 1,\r\n//       },\r\n//     });\r\n//   }\r\n\r\n//    redirect(\"/cart\");\r\n// }\r\nexport async function addProductCart(formData: FormData) {\r\n  const session = await auth();\r\n\r\n  if (!session?.user?.id) {\r\n    throw new Error(\"Пользователь не авторизован\");\r\n  }\r\n\r\n  const { productId, quantity } = z\r\n    .object({\r\n      productId: z.string(),\r\n      quantity: z.string().transform((val) => parseInt(val, 10)),\r\n    })\r\n    .parse({\r\n      productId: formData.get(\"productId\"),\r\n      quantity: formData.get(\"quantity\"),\r\n    });\r\n\r\n  const existingCartItem = await db.cartItem.findFirst({\r\n    where: {\r\n      userId: session.user.id,\r\n      productId,\r\n    },\r\n  });\r\n\r\n  if (existingCartItem) {\r\n    await db.cartItem.update({\r\n      where: { id: existingCartItem.id },\r\n      data: { quantity: { increment: quantity } },\r\n    });\r\n  } else {\r\n    await db.cartItem.create({\r\n      data: {\r\n        userId: session.user.id,\r\n        productId,\r\n        quantity,\r\n      },\r\n    });\r\n  }\r\n\r\n  redirect(\"/cart\");\r\n}\r\n"],"names":[],"mappings":"AAAA,gBAAgB;AAEhB,+CAA+C;AAC/C,8CAA8C;AAC9C,2BAA2B;AAC3B,wCAAwC;AACxC,oCAAoC;AACpC,wDAAwD;AACxD,4DAA4D;AAC5D,iBAAiB;AACjB,gBAAgB;AAChB,0BAA0B;AAC1B,iCAAiC;AACjC,6CAA6C;AAC7C,iEAAiE;AACjE,gCAAgC;AAChC,SAAS;AACT,eAAe;AACf,oCAAoC;AACpC,kDAAkD;AAClD,sCAAsC;AACtC,4CAA4C;AAC5C,gDAAgD;AAChD,UAAU;AAEV,8BAA8B;AAC9B,cAAc;AACd,uBAAuB;AACvB,qCAAqC;AACrC,yBAAyB;AACzB,qCAAqC;AACrC,mCAAmC;AACnC,SAAS;AACT,QAAQ;AAER,gCAAgC;AAChC,2BAA2B;AAC3B,IAAI;AACJ,iCAAiC;AACjC,2CAA2C;AAC3C,+CAA+C;AAC/C,KAAK;AAEL,+DAA+D;AAC/D,oDAAoD;AACpD,kEAAkE;AAClE,kEAAkE;AAClE,gEAAgE;AAChE,mDAAmD;AAEnD,oFAAoF;AAEpF,+DAA+D;AAE/D,sCAAsC;AACtC,6DAA6D;AAC7D,iCAAiC;AACjC,oDAAoD;AAEpD,2CAA2C;AAE3C,4CAA4C;AAC5C,kBAAkB;AAClB,iCAAiC;AACjC,kCAAkC;AAElC,8CAA8C;AAE9C,8EAA8E;AAE9E,kCAAkC;AAClC,iCAAiC;AACjC,iBAAiB;AACjB,iBAAiB;AACjB,wBAAwB;AACxB,kBAAkB;AAClB,uBAAuB;AACvB,qBAAqB;AACrB,YAAY;AACZ,WAAW;AAEX,2DAA2D;AAC3D,OAAO;AAEP,4DAA4D;AAC5D,mBAAmB;AACnB,gBAAgB;AAChB,wBAAwB;AACxB,0BAA0B;AAC1B,4CAA4C;AAC5C,gDAAgD;AAChD,+CAA+C;AAC/C,2CAA2C;AAC3C,SAAS;AACT,eAAe;AACf,gCAAgC;AAChC,oCAAoC;AACpC,kDAAkD;AAClD,sCAAsC;AACtC,4CAA4C;AAC5C,gDAAgD;AAChD,UAAU;AAEV,8BAA8B;AAC9B,8BAA8B;AAC9B,cAAc;AACd,yBAAyB;AACzB,uCAAuC;AACvC,2BAA2B;AAC3B,iCAAiC;AACjC,qCAAqC;AACrC,SAAS;AACT,QAAQ;AAER,6CAA6C;AAC7C,IAAI;AAEJ,4DAA4D;AAC5D,mBAAmB;AACnB,kBAAkB;AAClB,0BAA0B;AAC1B,WAAW;AACX,iBAAiB;AACjB,kCAAkC;AAClC,YAAY;AACZ,yDAAyD;AACzD,4BAA4B;AAC5B,MAAM;AAGN,6DAA6D;AAC7D,kCAAkC;AAElC,8BAA8B;AAC9B,sDAAsD;AACtD,MAAM;AAEN,4BAA4B;AAC5B,gBAAgB;AAChB,+BAA+B;AAC/B,SAAS;AACT,eAAe;AACf,8CAA8C;AAC9C,UAAU;AAEV,2DAA2D;AAC3D,eAAe;AACf,iCAAiC;AACjC,mBAAmB;AACnB,SAAS;AACT,QAAQ;AAER,4BAA4B;AAC5B,iCAAiC;AACjC,4CAA4C;AAC5C,8CAA8C;AAC9C,UAAU;AACV,aAAa;AACb,iCAAiC;AACjC,gBAAgB;AAChB,mCAAmC;AACnC,qBAAqB;AACrB,uBAAuB;AACvB,WAAW;AACX,UAAU;AACV,MAAM;AAEN,wBAAwB;AACxB,IAAI;;;;;;;;;IAwCkB;IAuBA;IAiCA;IAoDA"}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/producList/addToCartButton.tsx"],"sourcesContent":["// //  \"use client\";\r\n\r\n// // import { addProductCart } from \"~/app/api/action/product\";\r\n\r\n// // export default function ProductPage({ productId }: { productId: string }) {\r\n// //   return (\r\n// //     <form action={addProductCart} className=\"mt-4 flex justify-center\">\r\n// //       <input type=\"hidden\" name=\"productId\" value={productId} />\r\n// //       <button type=\"submit\" className=\"btn btn-primary py-2 px-6 text-lg\">\r\n// //         Добавить в корзину\r\n// //       </button>\r\n// //     </form>\r\n// //   );\r\n// // }\r\n// \"use client\";\r\n\r\n// import { useState } from \"react\";\r\n// import { addProductCart } from \"~/app/api/action/product\";\r\n\r\n// export default function ProductPage({ productId, stock }: { productId: string, stock: num }) {\r\n//   const [quantity, setQuantity] = useState(1);\r\n\r\n//   const increase = () => setQuantity((q) => q + 1);\r\n//   const decrease = () => setQuantity((q) => (q > 1 ? q - 1 : 1));\r\n\r\n//   return (\r\n//     <form\r\n//       action={addProductCart}\r\n//       className=\"mt-6 flex flex-col items-center gap-6 rounded-xl border p-6 shadow-md\"\r\n//     >\r\n//       <input type=\"hidden\" name=\"productId\" value={productId} />\r\n//       <input type=\"hidden\" name=\"quantity\" value={quantity} />\r\n\r\n//       <div className=\"flex flex-col items-center gap-2\">\r\n//         <span className=\"text-lg font-medium text-gray-700\">Количество</span>\r\n//         <div className=\"flex items-center rounded-full border bg-white px-4 py-2 shadow-sm\">\r\n//           <button\r\n//             type=\"button\"\r\n//             onClick={decrease}\r\n//             className=\"text-xl font-bold text-gray-600 hover:text-black focus:outline-none\"\r\n//           >\r\n//             −\r\n//           </button>\r\n//           <span className=\"mx-4 w-6 text-center text-lg font-medium\">{quantity}</span>\r\n//           <button\r\n//             type=\"button\"\r\n//             onClick={increase}\r\n//             className=\"text-xl font-bold text-gray-600 hover:text-black focus:outline-none\"\r\n//           >\r\n//             +\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n\r\n//       <button\r\n//         type=\"submit\"\r\n//         className=\"rounded-full bg-blue-600 px-6 py-3 text-lg font-semibold text-white transition hover:bg-blue-700\"\r\n//       >\r\n//         Добавить в корзину\r\n//       </button>\r\n//     </form>\r\n//   );\r\n// }\r\n//  \"use client\";\r\n\r\n// import { addProductCart } from \"~/app/api/action/product\";\r\n\r\n// export default function ProductPage({ productId }: { productId: string }) {\r\n//   return (\r\n//     <form action={addProductCart} className=\"mt-4 flex justify-center\">\r\n//       <input type=\"hidden\" name=\"productId\" value={productId} />\r\n//       <button type=\"submit\" className=\"btn btn-primary py-2 px-6 text-lg\">\r\n//         Добавить в корзину\r\n//       </button>\r\n//     </form>\r\n//   );\r\n// }\r\n// \"use client\";\r\n\r\n// import { useState, useTransition } from \"react\";\r\n// import { addProductCart } from \"~/app/api/action/product\";\r\n\r\n// export default function ProductPage({ productId, stock }: { productId: string, stock: number }) {\r\n//   const [quantity, setQuantity] = useState(1);\r\n//   const [isPending, startTransition] = useTransition();\r\n//   const increase = () => setQuantity((q) => q + 1);\r\n//   const decrease = () => setQuantity((q) => (q > 1 ? q - 1 : 1));\r\n//   const handleChange = (delta: number) => {\r\n//     const newQuantity = quantity + delta;\r\n//     if (newQuantity < 1 || newQuantity > stock) \r\n//     return newQuantity;\r\n//     // startTransition(() => {\r\n//     //   return \r\n//     // });\r\n\r\n//   };\r\n//   return (\r\n//     <form\r\n//       action={addProductCart}\r\n//       className=\"mt-6 flex flex-col items-center gap-6 rounded-xl border p-6 shadow-md\"\r\n//     >\r\n//       <input type=\"hidden\" name=\"productId\" value={productId} />\r\n//       <input type=\"hidden\" name=\"quantity\" value={quantity} />\r\n\r\n//       <div className=\"flex flex-col items-center gap-2\">\r\n//         <span className=\"text-lg font-medium text-gray-700\">Количество</span>\r\n//         <div className=\"flex items-center rounded-full border bg-white px-4 py-2 shadow-sm\">\r\n//           <button\r\n//             type=\"button\"\r\n//             disabled={quantity <= 1 || isPending}\r\n//             onClick={(quantity)=>handleChange(-1)}\r\n//             className=\"text-xl font-bold text-gray-600 hover:text-black focus:outline-none\"\r\n//           >\r\n//             −\r\n//           </button>\r\n//           <span className=\"mx-4 w-6 text-center text-lg font-medium\">{quantity}</span>\r\n//           <button\r\n//             type=\"button\"\r\n//             onClick={(quantity)=>handleChange(1)}\r\n//             disabled={quantity >= stock || isPending}\r\n//             className=\"text-xl font-bold text-gray-600 hover:text-black focus:outline-none\"\r\n//           >\r\n//             +\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n\r\n//       <button\r\n//         type=\"submit\"\r\n//         className=\"rounded-full bg-blue-600 px-6 py-3 text-lg font-semibold text-white transition hover:bg-blue-700\"\r\n//       >\r\n//         Добавить в корзину\r\n//       </button>\r\n//     </form>\r\n//   );\r\n// }\r\n\"use client\";\r\n\r\nimport { startTransition, useState } from \"react\";\r\nimport { addProductCart } from \"~/app/api/action/product\";\r\n\r\nexport default function ProductPage({ productId, stock }: { productId: string, stock: number }) {\r\n  const [quantity, setQuantity] = useState(1);\r\n  const increase = () => {\r\n    if (quantity < stock) {\r\n      startTransition(() => setQuantity((q) => q + 1));\r\n    }\r\n  };\r\n  const decrease = () => {\r\n    if (quantity > 1) {\r\n      startTransition(() => setQuantity((q) => q - 1));\r\n    }\r\n  };\r\n  // const increase = () => setQuantity((q) => q + 1 );\r\n  // const decrease = () => setQuantity((q) => (q > 1  ? q - 1 : 1));\r\n\r\n  return (\r\n    <form\r\n      action={addProductCart}\r\n      className=\"mt-6 flex flex-col items-center gap-6 rounded-xl border p-6 shadow-md\"\r\n    >\r\n      <input type=\"hidden\" name=\"productId\" value={productId} />\r\n      <input type=\"hidden\" name=\"quantity\" value={quantity} />\r\n\r\n      <div className=\"flex flex-col items-center gap-2\">\r\n        <span className=\"text-lg font-medium text-gray-700\">Количество</span>\r\n        <div className=\"flex items-center rounded-full border bg-white px-4 py-2 shadow-sm\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={decrease}\r\n            className=\"text-xl font-bold text-gray-600 hover:text-black focus:outline-none\"\r\n          >\r\n            −\r\n          </button>\r\n          <span className=\"mx-4 w-6 text-center text-lg font-medium\">{quantity}</span>\r\n          <button\r\n            type=\"button\"\r\n            onClick={increase}\r\n            className=\"text-xl font-bold text-gray-600 hover:text-black focus:outline-none\"\r\n          >\r\n            +\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <button\r\n        type=\"submit\"\r\n        className=\"rounded-full bg-blue-600 px-6 py-3 text-lg font-semibold text-white transition hover:bg-blue-700\"\r\n      >\r\n        Добавить в корзину\r\n      </button>\r\n    </form>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,oBAAoB;AAEpB,gEAAgE;AAEhE,iFAAiF;AACjF,gBAAgB;AAChB,6EAA6E;AAC7E,sEAAsE;AACtE,gFAAgF;AAChF,gCAAgC;AAChC,qBAAqB;AACrB,iBAAiB;AACjB,UAAU;AACV,OAAO;AACP,gBAAgB;AAEhB,oCAAoC;AACpC,6DAA6D;AAE7D,iGAAiG;AACjG,iDAAiD;AAEjD,sDAAsD;AACtD,oEAAoE;AAEpE,aAAa;AACb,YAAY;AACZ,gCAAgC;AAChC,0FAA0F;AAC1F,QAAQ;AACR,mEAAmE;AACnE,iEAAiE;AAEjE,2DAA2D;AAC3D,gFAAgF;AAChF,+FAA+F;AAC/F,oBAAoB;AACpB,4BAA4B;AAC5B,iCAAiC;AACjC,8FAA8F;AAC9F,cAAc;AACd,gBAAgB;AAChB,sBAAsB;AACtB,yFAAyF;AACzF,oBAAoB;AACpB,4BAA4B;AAC5B,iCAAiC;AACjC,8FAA8F;AAC9F,cAAc;AACd,gBAAgB;AAChB,sBAAsB;AACtB,iBAAiB;AACjB,eAAe;AAEf,gBAAgB;AAChB,wBAAwB;AACxB,uHAAuH;AACvH,UAAU;AACV,6BAA6B;AAC7B,kBAAkB;AAClB,cAAc;AACd,OAAO;AACP,IAAI;AACJ,iBAAiB;AAEjB,6DAA6D;AAE7D,8EAA8E;AAC9E,aAAa;AACb,0EAA0E;AAC1E,mEAAmE;AACnE,6EAA6E;AAC7E,6BAA6B;AAC7B,kBAAkB;AAClB,cAAc;AACd,OAAO;AACP,IAAI;AACJ,gBAAgB;AAEhB,mDAAmD;AACnD,6DAA6D;AAE7D,oGAAoG;AACpG,iDAAiD;AACjD,0DAA0D;AAC1D,sDAAsD;AACtD,oEAAoE;AACpE,8CAA8C;AAC9C,4CAA4C;AAC5C,mDAAmD;AACnD,0BAA0B;AAC1B,iCAAiC;AACjC,mBAAmB;AACnB,aAAa;AAEb,OAAO;AACP,aAAa;AACb,YAAY;AACZ,gCAAgC;AAChC,0FAA0F;AAC1F,QAAQ;AACR,mEAAmE;AACnE,iEAAiE;AAEjE,2DAA2D;AAC3D,gFAAgF;AAChF,+FAA+F;AAC/F,oBAAoB;AACpB,4BAA4B;AAC5B,oDAAoD;AACpD,qDAAqD;AACrD,8FAA8F;AAC9F,cAAc;AACd,gBAAgB;AAChB,sBAAsB;AACtB,yFAAyF;AACzF,oBAAoB;AACpB,4BAA4B;AAC5B,oDAAoD;AACpD,wDAAwD;AACxD,8FAA8F;AAC9F,cAAc;AACd,gBAAgB;AAChB,sBAAsB;AACtB,iBAAiB;AACjB,eAAe;AAEf,gBAAgB;AAChB,wBAAwB;AACxB,uHAAuH;AACvH,UAAU;AACV,6BAA6B;AAC7B,kBAAkB;AAClB,cAAc;AACd,OAAO;AACP,IAAI;;;;;AAGJ;AACA;;;AAHA;;;AAKe,SAAS,YAAY,EAAE,SAAS,EAAE,KAAK,EAAwC;;IAC5F,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,4RAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,WAAW;QACf,IAAI,WAAW,OAAO;YACpB,CAAA,GAAA,4RAAA,CAAA,kBAAe,AAAD,EAAE,IAAM,YAAY,CAAC,IAAM,IAAI;QAC/C;IACF;IACA,MAAM,WAAW;QACf,IAAI,WAAW,GAAG;YAChB,CAAA,GAAA,4RAAA,CAAA,kBAAe,AAAD,EAAE,IAAM,YAAY,CAAC,IAAM,IAAI;QAC/C;IACF;IACA,qDAAqD;IACrD,mEAAmE;IAEnE,qBACE,4TAAC;QACC,QAAQ,yIAAA,CAAA,iBAAc;QACtB,WAAU;;0BAEV,4TAAC;gBAAM,MAAK;gBAAS,MAAK;gBAAY,OAAO;;;;;;0BAC7C,4TAAC;gBAAM,MAAK;gBAAS,MAAK;gBAAW,OAAO;;;;;;0BAE5C,4TAAC;gBAAI,WAAU;;kCACb,4TAAC;wBAAK,WAAU;kCAAoC;;;;;;kCACpD,4TAAC;wBAAI,WAAU;;0CACb,4TAAC;gCACC,MAAK;gCACL,SAAS;gCACT,WAAU;0CACX;;;;;;0CAGD,4TAAC;gCAAK,WAAU;0CAA4C;;;;;;0CAC5D,4TAAC;gCACC,MAAK;gCACL,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;;;;;;;;0BAML,4TAAC;gBACC,MAAK;gBACL,WAAU;0BACX;;;;;;;;;;;;AAKP;GApDwB;KAAA"}},
    {"offset": {"line": 416, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/rerwies/reviews.tsx"],"sourcesContent":["// import { db } from \"~/server/db\";\r\n\r\n// export default async function Reviews({ productId }: { productId: string }) {\r\n//   const reviews = await db.review.findMany({\r\n//     where: { productId },\r\n//     include: {\r\n//       user: true,\r\n//     },\r\n//   });\r\n\r\n//   if (reviews.length === 0) {\r\n//     return <p>Отзывов пока нет.</p>;\r\n//   }\r\n\r\n//   return (\r\n//     <div>\r\n//       {reviews.map((review) => (\r\n//         <div key={review.id} className=\"review\">\r\n//           <div className=\"review-header\">\r\n//             <h3>{review.user.name}</h3>\r\n//             <span>Рейтинг: {review.rating}</span>\r\n//             <span>{new Date(review.createdAt).toLocaleDateString()}</span>\r\n//           </div>\r\n//           {review.comment && <p>{review.comment}</p>}\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// }\r\n// import { db } from \"~/server/db\";\r\n\r\n// export default async function Reviews({ productId }: { productId: string }) {\r\n//   const reviews = await db.review.findMany({\r\n//     where: { productId },\r\n//     include: {\r\n//       user: true,\r\n//     },\r\n//   });\r\n\r\n//   if (reviews.length === 0) {\r\n//     return <p className=\"text-center text-gray-500\">Отзывов пока нет.</p>;\r\n//   }\r\n\r\n//   return (\r\n//     <div className=\"space-y-6\">\r\n//       {reviews.map((review) => (\r\n//         <div key={review.id} className=\"border p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow\">\r\n//           <div className=\"flex items-center space-x-4\">\r\n//             <div className=\"w-12 h-12 rounded-full overflow-hidden\">\r\n//               {review.user.image ? (\r\n//                 <img src={review.user.image} alt={review.user.name || undefined} className=\"w-full h-full object-cover\" />\r\n//               ) : (\r\n//                 <div className=\"w-full h-full bg-gray-300 flex items-center justify-center text-gray-700\">\r\n//                   {review.user.name}\r\n//                 </div>\r\n//               )}\r\n//             </div>\r\n//             <div>\r\n//               <h3 className=\"text-xl font-semibold\">{review.user.name || \"Нет имени\"}</h3>\r\n//               <div className=\"text-yellow-500 flex items-center\">\r\n//                 {Array.from({ length: 5 }, (_, index) => (\r\n//                   <span key={index} className={index < review.rating ? \"text-yellow-500\" : \"text-gray-300\"}>\r\n//                     ★\r\n//                   </span>\r\n//                 ))}\r\n//               </div>\r\n//               <span className=\"text-sm text-gray-400\">\r\n//                 {new Date(review.createdAt).toLocaleDateString()}\r\n//               </span>\r\n//             </div>\r\n//           </div>\r\n\r\n//           {review.comment && <p className=\"mt-2 text-gray-700\">{review.comment}</p>}\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// }\r\n// components/Reviews.tsx\r\n// components/Reviews.tsx\r\n// \"use client\";\r\n\r\n// import { api } from \"~/trpc/react\";\r\n\r\n// export default function Reviews({ productId }: { productId: string }) {\r\n//   const { data: reviews = [], isLoading } = api.review.getByProduct.useQuery({ productId });\r\n\r\n//   if (isLoading) return <p>Загрузка отзывов...</p>;\r\n//   if (reviews.length === 0) return <p className=\"text-center text-gray-500\">Отзывов пока нет.</p>;\r\n\r\n//   return (\r\n//     <div className=\"space-y-6\">\r\n//       {reviews.map((review) => (\r\n//         <div key={review.id} className=\"border p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow\">\r\n//           <div className=\"flex items-center space-x-4\">\r\n//             <div className=\"w-12 h-12 rounded-full overflow-hidden\">\r\n//               {review.user.image ? (\r\n//                 <img src={review.user.image} alt={review.user.name || undefined} className=\"w-full h-full object-cover\" />\r\n//               ) : (\r\n//                 <div className=\"w-full h-full bg-gray-300 flex items-center justify-center text-gray-700\">\r\n//                   {review.user.name}\r\n//                 </div>\r\n//               )}\r\n//             </div>\r\n//             <div>\r\n//               <h3 className=\"text-xl font-semibold\">{review.user.name || \"Нет имени\"}</h3>\r\n//               <div className=\"text-yellow-500 flex items-center\">\r\n//                 {Array.from({ length: 5 }, (_, index) => (\r\n//                   <span key={index} className={index < review.rating ? \"text-yellow-500\" : \"text-gray-300\"}>\r\n//                     ★\r\n//                   </span>\r\n//                 ))}\r\n//               </div>\r\n//               <span className=\"text-sm text-gray-400\">\r\n//                 {new Date(review.createdAt).toLocaleDateString()}\r\n//               </span>\r\n//             </div>\r\n//           </div>\r\n//           {review.comment && <p className=\"mt-2 text-gray-700\">{review.comment}</p>}\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// }\r\n// \"use client\";\r\n\r\n// import { api } from \"~/trpc/react\";\r\n// import { useQueryClient } from \"@tanstack/react-query\";\r\n// import { useEffect } from \"react\";\r\n\r\n// export default function Reviews({ productId }: { productId: string }) {\r\n//   const queryClient = useQueryClient();\r\n\r\n//   const { data: reviews = [], isLoading } = api.review.getByProduct.useQuery(\r\n//     { productId },\r\n//     {\r\n//       // Опционально: автообновление каждые 10 секунд\r\n//       // refetchInterval: 10000,\r\n//     }\r\n//   );\r\n\r\n//   // Автоматическое обновление кеша, если нужно \"принудительно\"\r\n//   // Например, можно использовать в useEffect, когда появляется событие\r\n//   // от формы добавления (например, через context, eventBus и т.п.)\r\n\r\n//   if (isLoading) return <p>Загрузка отзывов...</p>;\r\n//   if (reviews.length === 0) return <p className=\"text-center text-gray-500\">Отзывов пока нет.</p>;\r\n\r\n//   return (\r\n//     <div className=\"space-y-6\">\r\n//       {reviews.map((review) => (\r\n//         <div\r\n//           key={review.id}\r\n//           className=\"border p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow\"\r\n//         >\r\n//           <div className=\"flex items-center space-x-4\">\r\n//             <div className=\"w-12 h-12 rounded-full overflow-hidden\">\r\n//               {review.user.image ? (\r\n//                 <img\r\n//                   src={review.user.image}\r\n//                   alt={review.user.name || undefined}\r\n//                   className=\"w-full h-full object-cover\"\r\n//                 />\r\n//               ) : (\r\n//                 <div className=\"w-full h-full bg-gray-300 flex items-center justify-center text-gray-700\">\r\n//                   {review.user.name}\r\n//                 </div>\r\n//               )}\r\n//             </div>\r\n//             <div>\r\n//               <h3 className=\"text-xl font-semibold\">\r\n//                 {review.user.name || \"Нет имени\"}\r\n//               </h3>\r\n//               <div className=\"text-yellow-500 flex items-center\">\r\n//                 {Array.from({ length: 5 }, (_, index) => (\r\n//                   <span\r\n//                     key={index}\r\n//                     className={index < review.rating ? \"text-yellow-500\" : \"text-gray-300\"}\r\n//                   >\r\n//                     ★\r\n//                   </span>\r\n//                 ))}\r\n//               </div>\r\n//               <span className=\"text-sm text-gray-400\">\r\n//                 {new Date(review.createdAt).toLocaleDateString()}\r\n//               </span>\r\n//             </div>\r\n//           </div>\r\n//           {review.comment && <p className=\"mt-2 text-gray-700\">{review.comment}</p>}\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// }\r\n// ~/app/components/Reviews.tsx\r\n// ~/app/components/Reviews.tsx\r\n// ~/app/components/Reviews.tsx\r\n// ~/app/components/Reviews.tsx\r\n// ~/app/components/Reviews.tsx\r\n\"use client\";\r\n\r\n// import { api } from \"~/trpc/react\";\r\n\r\n// type ReviewWithUser = {\r\n//   id: string;\r\n//   productId: string;\r\n//   userId: string;\r\n//   rating: number;\r\n//   comment: string | null;\r\n//   createdAt: Date;\r\n//   user: {\r\n//     id: string;\r\n//     name: string | null;\r\n//     image: string | null;\r\n//   };\r\n// };\r\n\r\n// export default function Reviews({ productId }: { productId: string }) {\r\n//   // Use polling to refresh reviews every 5 seconds\r\n//   const { data: reviews = [], isLoading } = api.review.getByProduct.useQuery(\r\n//     { productId },\r\n    // {\r\n    //   refetchInterval: 5000, // Refresh every 5 seconds\r\n    // }\r\n//   );\r\n\r\n//   if (isLoading) return <p>Загрузка отзывов...</p>;\r\n//   if (reviews.length === 0) return <p className=\"text-center text-gray-500\">Отзывов пока нет.</p>;\r\n\r\n//   return (\r\n//     <div className=\"space-y-6\">\r\n//       {reviews.map((review) => (\r\n//         <div key={review.id} className=\"border p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow\">\r\n//           <div className=\"flex items-center space-x-4\">\r\n//             <div className=\"w-12 h-12 rounded-full overflow-hidden\">\r\n//               {review.user.image ? (\r\n//                 <img \r\n//                   src={review.user.image} \r\n//                   alt={review.user.name || \"User\"} \r\n//                   className=\"w-full h-full object-cover\" \r\n//                 />\r\n//               ) : (\r\n//                 <div className=\"w-full h-full bg-gray-300 flex items-center justify-center text-gray-700\">\r\n//                   {review.user.name?.charAt(0) || \"U\"}\r\n//                 </div>\r\n//               )}\r\n//             </div>\r\n//             <div>\r\n//               <h3 className=\"text-xl font-semibold\">{review.user.name || \"Аноним\"}</h3>\r\n//               <div className=\"text-yellow-500 flex items-center\">\r\n//                 {Array.from({ length: 5 }, (_, index) => (\r\n//                   <span key={index} className={index < review.rating ? \"text-yellow-500\" : \"text-gray-300\"}>\r\n//                     ★\r\n//                   </span>\r\n//                 ))}\r\n//               </div>\r\n//               <span className=\"text-sm text-gray-400\">\r\n//                 {new Date(review.createdAt).toLocaleDateString()}\r\n//               </span>\r\n//             </div>\r\n//           </div>\r\n//           {review.comment && <p className=\"mt-2 text-gray-700\">{review.comment}</p>}\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// }\r\n// \"use client\";\r\n\r\n// import { api } from \"~/trpc/react\";\r\n// import Image from \"next/image\";\r\n\r\n// export default function Reviews({ productId }: { productId: string }) {\r\n//   const { data: reviews, isLoading } = api.review.getByProduct.useQuery({ \r\n//     productId \r\n//   });\r\n\r\n//   if (isLoading) return <div className=\"text-center py-4\">Загрузка отзывов...</div>;\r\n//   if (!reviews || reviews.length === 0) return <div className=\"text-center py-4\">Отзывов пока нет</div>;\r\n\r\n//   return (\r\n//     <div className=\"mt-8 space-y-6\">\r\n//       <h2 className=\"text-2xl font-bold\">Отзывы</h2>\r\n//       {reviews.map((review) => (\r\n//         <div key={review.id} className=\"p-4 border rounded-lg\">\r\n//           <div className=\"flex items-center gap-4 mb-2\">\r\n//             {/* {review.user.image && (\r\n//               // <div className=\"avatar\">\r\n//                 {/* <div className=\"w-12 rounded-full\">\r\n//                   <Image \r\n//                     src={review.user.image} \r\n//                     alt=\"User avatar\" \r\n//                     width={48} \r\n//                     height={48}\r\n//                   />\r\n//                 </div> */}\r\n//               {/* </div> */}\r\n            \r\n//             <div>\r\n//               <div className=\"font-semibold\">\r\n//                 {review.user.name || 'Аноним'} {review.user.surname || ''}\r\n//               </div>\r\n//               <div className=\"text-yellow-500\">\r\n//                 {[...Array(5)].map((_, i) => (\r\n//                   <span key={i}>{i < review.rating ? '★' : '☆'}</span>\r\n//                 ))}\r\n//               </div>\r\n//             </div>\r\n//           </div>\r\n//           <p className=\"text-gray-700\">{review.comment}</p>\r\n//           <div className=\"text-sm text-gray-500 mt-2\">\r\n//             {new Date(review.createdAt).toLocaleDateString()}\r\n//           </div>\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// \"use client\";\r\n\r\n// import { useState } from \"react\";\r\n// import { api } from \"~/trpc/react\";\r\n// import { PencilSquareIcon, TrashIcon, FolderPlusIcon } from \"@heroicons/react/24/outline\";\r\n// import { useSession } from \"next-auth/react\";\r\n\r\n// export default function Reviews({ productId }: { productId: string }) {\r\n//   const { data: session } = useSession();\r\n//   const currentUser = session?.user;\r\n\r\n//   const { data: reviews, isLoading, refetch } = api.review.getByProduct.useQuery({ productId });\r\n//   const deleteMutation = api.review.delete.useMutation({ onSuccess: () => refetch() });\r\n//   const createReplyMutation = api.review.create.useMutation({ onSuccess: () => refetch() });\r\n//   const updateMutation = api.review.update.useMutation({\r\n//     onSuccess: () => {\r\n//       refetch();\r\n//     },\r\n//   });\r\n\r\n//   const [replyingTo, setReplyingTo] = useState<string | null>(null);\r\n//   const [replyText, setReplyText] = useState<string>(\"\");\r\n//   const [editingReviewId, setEditingReviewId] = useState<string | null>(null);\r\n//   const [editText, setEditText] = useState<string>(\"\");\r\n\r\n//   if (isLoading) return <div className=\"text-center py-4\">Загрузка отзывов...</div>;\r\n//   if (!reviews || reviews.length === 0) return <div className=\"text-center py-4\">Отзывов пока нет</div>;\r\n\r\n//   return (\r\n//     <div className=\"mt-8 space-y-6\">\r\n//       <h2 className=\"text-2xl font-bold\">Отзывы</h2>\r\n//       {reviews.map((review) => (\r\n//         <div key={review.id} className=\"relative p-4 border rounded-lg\">\r\n//           {/* Кнопки редактирования и удаления */}\r\n//           {currentUser?.id === review.userId && (\r\n//             <div className=\"absolute top-2 right-2 flex gap-2\">\r\n//               <button\r\n//                 onClick={() => {\r\n//                   setEditingReviewId(review.id);\r\n//                   setEditText(review.comment || \"\");\r\n//                 }}\r\n//                 className=\"text-blue-600 hover:text-blue-800\"\r\n//                 title=\"Редактировать\"\r\n//               >\r\n//                 <PencilSquareIcon className=\"w-5 h-5\" />\r\n//               </button>\r\n//               <button\r\n//                 onClick={() => deleteMutation.mutate({ reviewId: review.id })}\r\n//                 className=\"text-red-500 hover:text-red-700\"\r\n//                 title=\"Удалить\"\r\n//               >\r\n//                 <TrashIcon className=\"w-5 h-5\" />\r\n//               </button>\r\n//             </div>\r\n//           )}\r\n\r\n//           {/* Автор и рейтинг */}\r\n//           <div className=\"flex items-center gap-4 mb-2\">\r\n//             <div>\r\n//               <div className=\"font-semibold\">\r\n//                 {review.user.name || \"Аноним\"} {review.user.surname || \"\"}\r\n//               </div>\r\n//               <div className=\"text-yellow-500\">\r\n//                 {[...Array(5)].map((_, i) => (\r\n//                   <span key={i}>{i < review.rating ? \"★\" : \"☆\"}</span>\r\n//                 ))}\r\n//               </div>\r\n//             </div>\r\n//           </div>\r\n\r\n//           {/* Редактируемый или обычный текст */}\r\n//           {editingReviewId === review.id ? (\r\n//             <div className=\"space-y-2\">\r\n//               <textarea\r\n//                 className=\"w-full border p-2 rounded\"\r\n//                 value={editText}\r\n//                 onChange={(e) => setEditText(e.target.value)}\r\n//               />\r\n//               <div className=\"flex gap-2\">\r\n//                 <button\r\n//                   onClick={() => {\r\n//                     updateMutation.mutate({\r\n//                       reviewId: review.id, // ключ должен быть reviewId, не id\r\n//                       comment: editText,\r\n//                       rating: review.rating,\r\n//                     });\r\n//                     setEditingReviewId(null); // оптимистично скрываем форму редактирования\r\n//                   }}\r\n//                   className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n//                 >\r\n//                   Сохранить\r\n//                 </button>\r\n//                 <button\r\n//                   onClick={() => setEditingReviewId(null)}\r\n//                   className=\"px-3 py-1 bg-gray-300 rounded hover:bg-gray-400\"\r\n//                 >\r\n//                   Отмена\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n//           ) : (\r\n//             <p className=\"text-gray-700\">{review.comment}</p>\r\n//           )}\r\n\r\n//           <div className=\"text-sm text-gray-500 mt-2\">\r\n//             {new Date(review.createdAt).toLocaleDateString()}\r\n//           </div>\r\n\r\n//           {/* Ответить */}\r\n//           {currentUser?.id !== review.userId && (\r\n//             <div className=\"mt-2\">\r\n//               <button\r\n//                 onClick={() => setReplyingTo(replyingTo === review.id ? null : review.id)}\r\n//                 className=\"flex items-center text-blue-600 hover:underline gap-1\"\r\n//               >\r\n//                 <FolderPlusIcon className=\"w-4 h-4\" />\r\n//                 Ответить\r\n//               </button>\r\n//             </div>\r\n//           )}\r\n\r\n//           {/* Форма ответа */}\r\n//           {replyingTo === review.id && (\r\n//             <div className=\"mt-2 space-y-2\">\r\n//               <textarea\r\n//                 className=\"w-full border p-2 rounded\"\r\n//                 value={replyText}\r\n//                 onChange={(e) => setReplyText(e.target.value)}\r\n//               />\r\n//               <div className=\"flex gap-2\">\r\n//                 <button\r\n//                   onClick={() => {\r\n//                     createReplyMutation.mutate({\r\n//                       productId,\r\n//                       comment: replyText,\r\n//                       rating: 0,\r\n//                       parentId: review.id,\r\n//                       userId: currentUser?.id || \"\",\r\n//                     });\r\n//                     setReplyText(\"\");\r\n//                     setReplyingTo(null);\r\n//                   }}\r\n//                   className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n//                 >\r\n//                   Ответить\r\n//                 </button>\r\n//                 <button\r\n//                   onClick={() => setReplyingTo(null)}\r\n//                   className=\"px-3 py-1 bg-gray-300 rounded hover:bg-gray-400\"\r\n//                 >\r\n//                   Отмена\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n//           )}\r\n\r\n//           {/* Вложенные ответы */}\r\n//           {review.replies?.length > 0 && (\r\n//             <div className=\"mt-4 ml-6 border-l-2 border-gray-200 space-y-4 pl-4\">\r\n//               {review.replies.map((reply) => (\r\n//                 <div key={reply.id} className=\"text-sm text-left\">\r\n//                   <div className=\"font-semibold\">\r\n//                     {reply.user.name || \"Аноним\"} {reply.user.surname || \"\"}\r\n//                   </div>\r\n//                   <p className=\"text-gray-700\">{reply.comment}</p>\r\n//                   <div className=\"text-xs text-gray-500 mt-1\">\r\n//                     {new Date(reply.createdAt).toLocaleDateString()}\r\n//                   </div>\r\n//                 </div>\r\n//               ))}\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// }\r\n// \"use client\";\r\n\r\n// import { useState } from \"react\";\r\n// import { api } from \"~/trpc/react\";\r\n// import {\r\n//   PencilSquareIcon,\r\n//   TrashIcon,\r\n//   FolderPlusIcon,\r\n// } from \"@heroicons/react/24/outline\";\r\n// import { useSession } from \"next-auth/react\";\r\n\r\n// export default function Reviews({ productId }: { productId: string }) {\r\n//   const { data: session } = useSession();\r\n//   const currentUser = session?.user;\r\n\r\n//   const { data: reviews, isLoading, refetch } = api.review.getByProduct.useQuery({ productId });\r\n//   const deleteMutation = api.review.delete.useMutation({ onSuccess: () => refetch() });\r\n//   const createReplyMutation = api.review.create.useMutation({ onSuccess: () => refetch() });\r\n//   const updateMutation = api.review.update.useMutation({ onSuccess: () => refetch() });\r\n\r\n//   const [replyingTo, setReplyingTo] = useState<string | null>(null);\r\n//   const [replyText, setReplyText] = useState<string>(\"\");\r\n//   const [editingReviewId, setEditingReviewId] = useState<string | null>(null);\r\n//   const [editText, setEditText] = useState<string>(\"\");\r\n\r\n//   if (isLoading) return <div className=\"text-center py-4\">Загрузка отзывов...</div>;\r\n//   if (!reviews || reviews.length === 0) return <div className=\"text-center py-4\">Отзывов пока нет</div>;\r\n\r\n//   return (\r\n//     <div className=\"mt-8 space-y-6\">\r\n//       <h2 className=\"text-2xl font-bold\">Отзывы</h2>\r\n//       {reviews.map((review) => (\r\n//         <div key={review.id} className=\"relative p-4 border rounded-lg\">\r\n//           {/* Кнопки редактирования и удаления */}\r\n//           {currentUser?.id === review.userId && (\r\n//             <div className=\"absolute top-2 right-2 flex gap-2\">\r\n//               <button\r\n//                 onClick={() => {\r\n//                   setEditingReviewId(review.id);\r\n//                   setEditText(review.comment || \"\");\r\n//                 }}\r\n//                 className=\"text-blue-600 hover:text-blue-800\"\r\n//                 title=\"Редактировать\"\r\n//               >\r\n//                 <PencilSquareIcon className=\"w-5 h-5\" />\r\n//               </button>\r\n//               <button\r\n//                 onClick={() => deleteMutation.mutate({ reviewId: review.id })}\r\n//                 className=\"text-red-500 hover:text-red-700\"\r\n//                 title=\"Удалить\"\r\n//               >\r\n//                 <TrashIcon className=\"w-5 h-5\" />\r\n//               </button>\r\n//             </div>\r\n//           )}\r\n\r\n//           {/* Автор и рейтинг */}\r\n//           <div className=\"flex items-center gap-4 mb-2\">\r\n//             <div>\r\n//               <div className=\"font-semibold\">\r\n//                 {review.user.name || \"Аноним\"} {review.user.surname || \"\"}\r\n//               </div>\r\n//               <div className=\"text-yellow-500\">\r\n//                 {[...Array(5)].map((_, i) => (\r\n//                   <span key={i}>{i < review.rating ? \"★\" : \"☆\"}</span>\r\n//                 ))}\r\n//               </div>\r\n//             </div>\r\n//           </div>\r\n\r\n//           {/* Комментарий или форма редактирования */}\r\n//           {editingReviewId === review.id ? (\r\n//             <div className=\"space-y-2\">\r\n//               <textarea\r\n//                 className=\"w-full border p-2 rounded\"\r\n//                 value={editText}\r\n//                 onChange={(e) => setEditText(e.target.value)}\r\n//               />\r\n//               <div className=\"flex gap-2\">\r\n//                 <button\r\n//                   onClick={() => {\r\n//                     updateMutation.mutate({\r\n//                       reviewId: review.id,\r\n//                       comment: editText,\r\n//                       rating: review.rating,\r\n//                     });\r\n//                     setEditingReviewId(null);\r\n//                   }}\r\n//                   className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n//                 >\r\n//                   Сохранить\r\n//                 </button>\r\n//                 <button\r\n//                   onClick={() => setEditingReviewId(null)}\r\n//                   className=\"px-3 py-1 bg-gray-300 rounded hover:bg-gray-400\"\r\n//                 >\r\n//                   Отмена\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n//           ) : (\r\n//             <p className=\"text-gray-700\">{review.comment}</p>\r\n//           )}\r\n\r\n//           <div className=\"text-sm text-gray-500 mt-2\">\r\n//             {new Date(review.createdAt).toLocaleDateString()}\r\n//           </div>\r\n\r\n//           {/* Кнопка ответа */}\r\n//           {currentUser?.id !== review.userId && (\r\n//             <div className=\"mt-2\">\r\n//               <button\r\n//                 onClick={() => setReplyingTo(replyingTo === review.id ? null : review.id)}\r\n//                 className=\"flex items-center text-blue-600 hover:underline gap-1\"\r\n//               >\r\n//                 <FolderPlusIcon className=\"w-4 h-4\" />\r\n//                 Ответить\r\n//               </button>\r\n//             </div>\r\n//           )}\r\n\r\n//           {/* Форма ответа */}\r\n//           {replyingTo === review.id && (\r\n//             <div className=\"mt-2 space-y-2\">\r\n//               <textarea\r\n//                 className=\"w-full border p-2 rounded\"\r\n//                 value={replyText}\r\n//                 onChange={(e) => setReplyText(e.target.value)}\r\n//               />\r\n//               <div className=\"flex gap-2\">\r\n//                 <button\r\n//                   onClick={() => {\r\n//                     createReplyMutation.mutate({\r\n//                       productId,\r\n//                       comment: replyText,\r\n//                       rating: 0,\r\n//                       parentId: review.id,\r\n//                       userId: currentUser?.id || \"\",\r\n//                     });\r\n//                     setReplyText(\"\");\r\n//                     setReplyingTo(null);\r\n//                   }}\r\n//                   className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n//                 >\r\n//                   Ответить\r\n//                 </button>\r\n//                 <button\r\n//                   onClick={() => setReplyingTo(null)}\r\n//                   className=\"px-3 py-1 bg-gray-300 rounded hover:bg-gray-400\"\r\n//                 >\r\n//                   Отмена\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n//           )}\r\n\r\n//           {/* Ответы */}\r\n//           {review.replies?.length > 0 && (\r\n//             <div className=\"mt-4 ml-6 border-l-2 border-gray-200 space-y-4 pl-4\">\r\n//               {review.replies.map((reply) => (\r\n//                 <div key={reply.id} className=\"text-sm text-left\">\r\n//                   <div className=\"font-semibold\">\r\n//                     {reply.user.name || \"Аноним\"} {reply.user.surname || \"\"}\r\n//                   </div>\r\n//                   <p className=\"text-gray-700\">{reply.comment}</p>\r\n//                   <div className=\"text-xs text-gray-500 mt-1\">\r\n//                     {new Date(reply.createdAt).toLocaleDateString()}\r\n//                   </div>\r\n//                 </div>\r\n//               ))}\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// }\r\n// \"use client\";\r\n\r\n// import { useState } from \"react\";\r\n// import { api } from \"~/trpc/react\";\r\n// import {\r\n//   PencilSquareIcon,\r\n//   TrashIcon,\r\n//   FolderPlusIcon,\r\n// } from \"@heroicons/react/24/outline\";\r\n// import { useSession } from \"next-auth/react\";\r\n\r\n// export default function Reviews({ productId }: { productId: string }) {\r\n//   const { data: session } = useSession();\r\n//   const currentUser = session?.user;\r\n\r\n//   const { data: reviews, isLoading, refetch } = api.review.getByProduct.useQuery({ productId });\r\n//   const deleteMutation = api.review.delete.useMutation({ onSuccess: () => refetch() });\r\n//   const createReplyMutation = api.review.create.useMutation({ onSuccess: () => refetch() });\r\n//   const updateMutation = api.review.update.useMutation({ onSuccess: () => refetch() });\r\n\r\n//   const [replyingTo, setReplyingTo] = useState<string | null>(null);\r\n//   const [replyText, setReplyText] = useState<string>(\"\");\r\n//   const [editingReviewId, setEditingReviewId] = useState<string | null>(null);\r\n//   const [editText, setEditText] = useState<string>(\"\");\r\n\r\n//   if (isLoading) return <div className=\"text-center py-4\">Загрузка отзывов...</div>;\r\n//   if (!reviews || reviews.length === 0) return <div className=\"text-center py-4\">Отзывов пока нет</div>;\r\n\r\n//   return (\r\n//     <div className=\"mt-8 space-y-6\">\r\n//       <h2 className=\"text-2xl font-bold\">Отзывы</h2>\r\n//       {reviews.map((review) => (\r\n//         <div key={review.id} className=\"relative p-4 border rounded-lg\">\r\n//           {/* Кнопки редактирования и удаления */}\r\n//           {currentUser?.id === review.userId && (\r\n//             <div className=\"absolute top-2 right-2 flex gap-2\">\r\n//               <button\r\n//                 onClick={() => {\r\n//                   setEditingReviewId(review.id);\r\n//                   setEditText(review.comment ?? \"\");\r\n//                 }}\r\n//                 className=\"text-blue-600 hover:text-blue-800\"\r\n//                 title=\"Редактировать\"\r\n//               >\r\n//                 <PencilSquareIcon className=\"w-5 h-5\" />\r\n//               </button>\r\n//               <button\r\n//                 onClick={() => deleteMutation.mutate({ reviewId: review.id })}\r\n//                 className=\"text-red-500 hover:text-red-700\"\r\n//                 title=\"Удалить\"\r\n//               >\r\n//                 <TrashIcon className=\"w-5 h-5\" />\r\n//               </button>\r\n//             </div>\r\n//           )}\r\n\r\n//           {/* Автор и рейтинг */}\r\n//           <div className=\"flex items-center gap-4 mb-2\">\r\n//             <div>\r\n//               <div className=\"font-semibold\">\r\n//                 {review.user.name || \"Аноним\"} {review.user.surname || \"\"}\r\n//               </div>\r\n//               <div className=\"text-yellow-500\">\r\n//                 {[...Array(5)].map((_, i) => (\r\n//                   <span key={i}>{i < review.rating ? \"★\" : \"☆\"}</span>\r\n//                 ))}\r\n//               </div>\r\n//             </div>\r\n//           </div>\r\n\r\n//           {/* Комментарий или форма редактирования */}\r\n//           {editingReviewId === review.id ? (\r\n//             <div className=\"space-y-2\">\r\n//               <textarea\r\n//                 className=\"w-full border p-2 rounded\"\r\n//                 value={editText}\r\n//                 onChange={(e) => setEditText(e.target.value)}\r\n//               />\r\n//               <div className=\"flex gap-2\">\r\n//                 <button\r\n//                   onClick={() => {\r\n//                     updateMutation.mutate({\r\n//                       reviewId: review.id,\r\n//                       comment: editText,\r\n//                       rating: review.rating,\r\n//                     });\r\n//                     setEditingReviewId(null);\r\n//                   }}\r\n//                   className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n//                 >\r\n//                   Сохранить\r\n//                 </button>\r\n//                 <button\r\n//                   onClick={() => setEditingReviewId(null)}\r\n//                   className=\"px-3 py-1 bg-gray-300 rounded hover:bg-gray-400\"\r\n//                 >\r\n//                   Отмена\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n//           ) : (\r\n//             <p className=\"text-gray-700\">{review.comment ?? \"\"}</p>\r\n//           )}\r\n\r\n//           <div className=\"text-sm text-gray-500 mt-2\">\r\n//             {new Date(review.createdAt).toLocaleDateString()}\r\n//           </div>\r\n\r\n//           {/* Кнопка ответа */}\r\n//           {/* {currentUser?.id !== review.userId && ( */}\r\n//             <div className=\"mt-2\">\r\n//               <button\r\n//                 onClick={() => setReplyingTo(replyingTo === review.id ? null : review.id)}\r\n//                 className=\"flex items-center text-blue-600 hover:underline gap-1\"\r\n//               >\r\n//                 <FolderPlusIcon className=\"w-4 h-4\" />\r\n//                 Ответить\r\n//               </button>\r\n//             </div>\r\n//           {/* )} */}\r\n\r\n//           {/* Форма ответа */}\r\n//           {replyingTo === review.id && (\r\n//             <div className=\"mt-2 space-y-2\">\r\n//               <textarea\r\n//                 className=\"w-full border p-2 rounded\"\r\n//                 value={replyText}\r\n//                 onChange={(e) => setReplyText(e.target.value)}\r\n//               />\r\n//               <div className=\"flex gap-2\">\r\n//                 <button\r\n//                   onClick={() => {\r\n//                     createReplyMutation.mutate({\r\n//                       productId,\r\n//                       comment: replyText,\r\n//                       rating: 0,\r\n//                       parentId: review.id,\r\n//                       userId: currentUser?.id || \"\",\r\n//                     });\r\n//                     setReplyText(\"\");\r\n//                     setReplyingTo(null);\r\n//                   }}\r\n//                   className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n//                 >\r\n//                   Ответить\r\n//                 </button>\r\n//                 <button\r\n//                   onClick={() => setReplyingTo(null)}\r\n//                   className=\"px-3 py-1 bg-gray-300 rounded hover:bg-gray-400\"\r\n//                 >\r\n//                   Отмена\r\n//                 </button>\r\n//               </div>\r\n//             </div> \r\n            \r\n//           )}\r\n\r\n//           {/* Ответы */}\r\n//           {Array.isArray(review.replies) && review.replies.length > 0 && (\r\n//             <div className=\"mt-4 ml-6 border-l-2 border-gray-200 space-y-4 pl-4\">\r\n//               {review.replies.map((reply) => (\r\n//                 <div key={reply.id} className=\"text-sm text-left\">\r\n//                   <div className=\"font-semibold\">\r\n//                     {reply.user.name || \"Аноним\"} {reply.user.surname || \"\"}\r\n//                   </div>\r\n//                   <p className=\"text-gray-700\">{reply.comment ?? \"\"}</p>\r\n//                   <div className=\"text-xs text-gray-500 mt-1\">\r\n//                     {new Date(reply.createdAt).toLocaleDateString()}\r\n//                   </div>\r\n//                 </div>\r\n//               ))}\r\n//                         {currentUser?.id === review.userId &&  (\r\n//             <div className=\"\">\r\n//               <button\r\n//                 onClick={() => {\r\n//                   setEditingReviewId(review.parentId);\r\n//                   setEditText(review.comment ?? \"\");\r\n//                 }}\r\n//                 className=\"text-blue-600 hover:text-blue-800\"\r\n//                 title=\"Редактировать\"\r\n//               >\r\n//                 <PencilSquareIcon className=\"w-5 h-5\" />\r\n//               </button>\r\n//               <button\r\n//                 onClick={() => deleteMutation.mutate({ reviewId: review.id })}\r\n//                 className=\"text-red-500 hover:text-red-700\"\r\n//                 title=\"Удалить\"\r\n//               >\r\n//                 <TrashIcon className=\"w-5 h-5\" />\r\n//               </button>\r\n//             </div>\r\n//           )}\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { api } from \"~/trpc/react\";\r\nimport {\r\n  PencilSquareIcon,\r\n  TrashIcon,\r\n  FolderPlusIcon,\r\n} from \"@heroicons/react/24/outline\";\r\nimport { useSession } from \"next-auth/react\";\r\n\r\nexport default function Reviews({ productId }: { productId: string }) {\r\n  const { data: session } = useSession();\r\n  const currentUser = session?.user;\r\n\r\n  const { data: reviews, isLoading, refetch } = api.review.getByProduct.useQuery({ productId },\r\n    {\r\n      refetchOnWindowFocus: true,\r\n    }\r\n    );\r\n  const deleteMutation = api.review.delete.useMutation({ onSuccess: () => refetch() });\r\n  const createReplyMutation = api.review.create.useMutation({ onSuccess: () => refetch() });\r\n  const updateMutation = api.review.update.useMutation({ onSuccess: () => refetch() });\r\n\r\n  const [replyingTo, setReplyingTo] = useState<string | null>(null);\r\n  const [replyText, setReplyText] = useState<string>(\"\");\r\n  const [editingReviewId, setEditingReviewId] = useState<string | null>(null);\r\n  const [editText, setEditText] = useState<string>(\"\");\r\n  const [expandedReplies, setExpandedReplies] = useState<Record<string, boolean>>({});\r\n  const [editingReplyId, setEditingReplyId] = useState<string | null>(null);\r\nconst [editReplyText, setEditReplyText] = useState<string>(\"\");\r\nconst [visibleReplies, setVisibleReplies] = useState<Record<string, boolean>>({});\r\n\r\n  if (isLoading) return <div className=\"text-center py-4\">Загрузка отзывов...</div>;\r\n  if (!reviews || reviews.length === 0) return <div className=\"text-center py-4\">Отзывов пока нет</div>;\r\n  return (\r\n    <div className=\"mt-8 space-y-6\">\r\n      <h2 className=\"text-2xl font-bold\">Отзывы</h2>\r\n      {reviews.map((review) => (\r\n        \r\n        <div key={review.id} className=\"relative p-4 border rounded-lg\">\r\n          {/* Кнопки редактирования и удаления */}\r\n          {currentUser?.id === review.userId && (\r\n            <div className=\"absolute top-2 right-2 flex gap-2\">\r\n              <button\r\n                onClick={() => {\r\n                  setEditingReviewId(review.id);\r\n                  setEditText(review.comment ?? \"\");\r\n                }}\r\n                className=\"text-blue-600 hover:text-blue-800\"\r\n                title=\"Редактировать\"\r\n              >\r\n                <PencilSquareIcon className=\"w-5 h-5\" />\r\n              </button>\r\n              <button\r\n                onClick={() => deleteMutation.mutate({ reviewId: review.id })}\r\n                className=\"text-red-500 hover:text-red-700\"\r\n                title=\"Удалить\"\r\n              >\r\n                <TrashIcon className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Автор и рейтинг */}\r\n          <div className=\"flex items-center gap-4 mb-2\">\r\n            <div>\r\n              <div className=\"font-semibold\">\r\n                {review.user.name || \"Аноним\"} {review.user.surname || \"\"}\r\n              </div>\r\n              <div className=\"text-yellow-500\">\r\n                {[...Array(5)].map((_, i) => (\r\n                  <span key={i}>{i < review.rating ? \"★\" : \"☆\"}</span>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Комментарий или форма редактирования */}\r\n          {editingReviewId === review.id ? (\r\n            <div className=\"space-y-2\">\r\n              <textarea\r\n                className=\"w-full border p-2 rounded\"\r\n                value={editText}\r\n                onChange={(e) => setEditText(e.target.value)}\r\n              />\r\n              <div className=\"flex gap-2\">\r\n                <button\r\n                  onClick={() => {\r\n                    updateMutation.mutate({\r\n                      reviewId: review.id,\r\n                      comment: editText,\r\n                      rating: review.rating,\r\n                    });\r\n                    setEditingReviewId(null);\r\n                  }}\r\n                  className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n                >\r\n                  Сохранить\r\n                </button>\r\n                <button\r\n                  onClick={() => setEditingReviewId(null)}\r\n                  className=\"px-3 py-1 bg-gray-300 rounded hover:bg-gray-400\"\r\n                >\r\n                  Отмена\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-gray-700\">{review.comment ?? \"\"}</p>\r\n          )}\r\n\r\n          <div className=\"text-sm text-gray-500 mt-2\">\r\n            {review.createdAt.toLocaleString()}\r\n          </div>\r\n\r\n          {/* Кнопка ответа */}\r\n          {/* {currentUser?.id !== review.userId && ( */}\r\n            <div className=\"mt-2\">\r\n              <button\r\n                onClick={() => setReplyingTo(replyingTo === review.id ? null : review.id)}\r\n                className=\"flex items-center text-blue-600 hover:underline gap-1\"\r\n              >\r\n                <FolderPlusIcon className=\"w-4 h-4\" />\r\n                Ответить\r\n              </button>\r\n            </div>\r\n          {/* )} */}\r\n\r\n          {/* Форма ответа */}\r\n          {replyingTo === review.id && (\r\n            <div className=\"mt-2 space-y-2\">\r\n              <textarea\r\n                className=\"w-full border p-2 rounded\"\r\n                value={replyText}\r\n                onChange={(e) => setReplyText(e.target.value)}\r\n              />\r\n              <div className=\"flex gap-2\">\r\n                <button\r\n                  onClick={() => {\r\n                    createReplyMutation.mutate({\r\n                      productId,\r\n                      comment: replyText,\r\n                      rating: 0,\r\n                      parentId: review.id,\r\n                      // userId: currentUser?.id || \"\",\r\n                    });\r\n                    setReplyText(\"\");\r\n                    setReplyingTo(null);\r\n                  }}\r\n                  className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n                >\r\n                  Ответить\r\n                </button>\r\n                <button\r\n                  onClick={() => setReplyingTo(null)}\r\n                  className=\"px-3 py-1 bg-gray-300 rounded hover:bg-gray-400\"\r\n                >\r\n                  Отмена\r\n                </button>\r\n              </div>\r\n            </div> \r\n          )}\r\n{Array.isArray(review.replies) && review.replies.length > 0 && (\r\n  <div className=\"mt-4 ml-6 space-y-2\">\r\n    <button\r\n      onClick={() =>\r\n        setVisibleReplies((prev) => ({\r\n          ...prev,\r\n          [review.id]: !prev[review.id],\r\n        }))\r\n      }\r\n      className=\"text-sm text-blue-600 hover:underline\"\r\n    >\r\n      {visibleReplies[review.id] ? \"Скрыть ответы\" : `Показать ответы (${review.replies.length})`}\r\n    </button>\r\n\r\n    {visibleReplies[review.id] && (\r\n      <div className=\"border-l-2 border-gray-200 space-y-4 pl-4\">\r\n        {review.replies.map((reply) => (\r\n          <div key={reply.id} className=\"text-sm text-left relative p-2 border rounded\">\r\n            {/* Автор ответа */}\r\n            <div className=\"font-semibold\">\r\n              {reply.user.name || \"Аноним\"} {reply.user.surname || \"\"}\r\n            </div>\r\n\r\n            {/* Комментарий или редактирование */}\r\n            {editingReplyId === reply.id ? (\r\n              <>\r\n                <textarea\r\n                  className=\"w-full border p-2 rounded mt-1\"\r\n                  value={editReplyText}\r\n                  onChange={(e) => setEditReplyText(e.target.value)}\r\n                />\r\n                <div className=\"flex gap-2 mt-2\">\r\n                  <button\r\n                    onClick={() => {\r\n                      updateMutation.mutate({\r\n                        reviewId: reply.id,\r\n                        comment: editReplyText,\r\n                        rating: reply.rating,\r\n                      });\r\n                      setEditingReplyId(null);\r\n                    }}\r\n                    className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n                  >\r\n                    Сохранить\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setEditingReplyId(null)}\r\n                    className=\"px-3 py-1 bg-gray-300 rounded hover:bg-gray-400\"\r\n                  >\r\n                    Отмена\r\n                  </button>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <p className=\"text-gray-700\">{reply.comment ?? \"\"}</p>\r\n                <div className=\"text-xs text-gray-500 mt-1\">\r\n                  {reply.createdAt.toLocaleString()}\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {/* Кнопки редактирования и удаления */}\r\n            {currentUser?.id === reply.userId && editingReplyId !== reply.id && (\r\n              <div className=\"absolute top-1 right-1 flex gap-2\">\r\n                <button\r\n                  onClick={() => {\r\n                    setEditingReplyId(reply.id);\r\n                    setEditReplyText(reply.comment ?? \"\");\r\n                  }}\r\n                  className=\"text-blue-600 hover:text-blue-800\"\r\n                  title=\"Редактировать\"\r\n                >\r\n                  <PencilSquareIcon className=\"w-4 h-4\" />\r\n                </button>\r\n                <button\r\n                  onClick={() => deleteMutation.mutate({ reviewId: reply.id })}\r\n                  className=\"text-red-500 hover:text-red-700\"\r\n                  title=\"Удалить\"\r\n                >\r\n                  <TrashIcon className=\"w-4 h-4\" />\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    )}\r\n  </div>\r\n)}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n  \r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1728, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1734, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/producList/confirmDialog.tsx"],"sourcesContent":["'use client';\r\n\r\nexport default function ConfirmDialog({\r\n  message,\r\n  onConfirm,\r\n  onCancel,\r\n}: {\r\n  message: string;\r\n  onConfirm: () => void;\r\n  onCancel: () => void;\r\n}) {\r\n  return (\r\n    <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50\">\r\n      <div className=\"bg-white p-6 rounded-lg shadow-lg max-w-sm w-full text-center\">\r\n        <p className=\"text-lg font-medium mb-6\">{message}</p>\r\n        <div className=\"flex justify-center gap-4\">\r\n          <button\r\n            onClick={onConfirm}\r\n            className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\"\r\n          >\r\n            Да\r\n          </button>\r\n          <button\r\n            onClick={onCancel}\r\n            className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\"\r\n          >\r\n            Нет\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEe,SAAS,cAAc,EACpC,OAAO,EACP,SAAS,EACT,QAAQ,EAKT;IACC,qBACE,4TAAC;QAAI,WAAU;kBACb,cAAA,4TAAC;YAAI,WAAU;;8BACb,4TAAC;oBAAE,WAAU;8BAA4B;;;;;;8BACzC,4TAAC;oBAAI,WAAU;;sCACb,4TAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;sCAGD,4TAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX;KA9BwB"}},
    {"offset": {"line": 1799, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1805, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/producList/editProductForm.tsx"],"sourcesContent":["\r\n'use client';\r\n\r\nimport { useState } from \"react\";\r\nimport ConfirmDialog from \"./confirmDialog\";\r\nimport { updateProduct } from \"~/app/api/action/product\";\r\n\r\ntype Category = {\r\n  id: string;\r\n  name: string;\r\n};\r\n\r\ntype Product = {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  price: number;\r\n  imageUrl: string;\r\n  categoryId: string;\r\n};\r\n\r\nexport default function EditProductForm({\r\n  product,\r\n  categories,\r\n}: {\r\n  product: Product;\r\n  categories: Category[];\r\n}) {\r\n  const [name, setName] = useState(product.name);\r\n  const [description, setDescription] = useState(product.description);\r\n  const [price, setPrice] = useState(product.price);\r\n  const [imageUrl, setImageUrl] = useState(product.imageUrl);\r\n  const [categoryId, setCategoryId] = useState(product.categoryId);\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setShowConfirm(true);\r\n  };\r\n\r\n  const confirmSave = async () => {\r\n    setShowConfirm(false);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"id\", product.id);\r\n    formData.append(\"name\", name);\r\n    formData.append(\"description\", description);\r\n    formData.append(\"price\", price.toString());\r\n    formData.append(\"imageUrl\", imageUrl);\r\n    formData.append(\"categoryId\", categoryId);\r\n\r\n    await updateProduct(formData);\r\n  };\r\n\r\n  return (\r\n    <form\r\n      onSubmit={handleSubmit}\r\n      className=\"bg-white p-6 rounded shadow-md max-w-2xl mx-auto mb-8 space-y-4\"\r\n    >\r\n      <h2 className=\"text-2xl font-bold mb-4\">Редактировать товар</h2>\r\n\r\n      <div>\r\n        <label htmlFor=\"name\" className=\"label font-semibold\">Название товара</label>\r\n        <input\r\n          id=\"name\"\r\n          className=\"w-full p-2 border rounded\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"description\" className=\"label font-semibold\">Описание</label>\r\n        <textarea\r\n          id=\"description\"\r\n          className=\"w-full p-2 border rounded\"\r\n          value={description}\r\n          onChange={(e) => setDescription(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"price\" className=\"label font-semibold\">Цена</label>\r\n        <input\r\n          id=\"price\"\r\n          type=\"number\"\r\n          className=\"w-full p-2 border rounded\"\r\n          value={price}\r\n          onChange={(e) => setPrice(parseFloat(e.target.value))}\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"imageUrl\" className=\"label font-semibold\">URL изображения</label>\r\n        <input\r\n          id=\"imageUrl\"\r\n          className=\"w-full p-2 border rounded\"\r\n          value={imageUrl}\r\n          onChange={(e) => setImageUrl(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"categoryId\" className=\"label font-semibold\">Категория</label>\r\n        <select\r\n          id=\"categoryId\"\r\n          value={categoryId}\r\n          className=\"w-full p-2 border rounded\"\r\n          onChange={(e) => setCategoryId(e.target.value)}\r\n        >\r\n          <option value=\"\">Выберите категорию</option>\r\n          {categories.map((cat) => (\r\n            <option key={cat.id} value={cat.id}>{cat.name}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      <button\r\n        type=\"submit\"\r\n        className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors\"\r\n      >\r\n        Сохранить изменения\r\n      </button>\r\n\r\n      {showConfirm && (\r\n        <ConfirmDialog\r\n          message=\"Вы уверены, что хотите сохранить изменения?\"\r\n          onConfirm={confirmSave}\r\n          onCancel={() => setShowConfirm(false)}\r\n        />\r\n      )}\r\n    </form>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2039, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2045, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/producList/editProductWrapper.tsx"],"sourcesContent":[" 'use client';\r\n\r\nimport { Category } from \"@prisma/client\";\r\nimport { useState } from \"react\";\r\nimport EditProductForm from \"./editProductForm\";\r\n\r\n\r\nexport default function EditProductWrapper({\r\n  product,\r\n  categories,\r\n}: {\r\n  product: any;\r\n  categories: Category[];\r\n}) {\r\n  const [editing, setEditing] = useState(false);\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center mb-6\">\r\n      <div className=\"flex justify-center mt-4\">\r\n        <button\r\n          onClick={() => setEditing((prev) => !prev)}\r\n          className=\"btn btn-primary py-2 px-6 text-lg\"\r\n        >\r\n          {editing ? \"Скрыть форму редактирования\" : \"Редактировать информацию о товаре\"}\r\n        </button>\r\n      </div>\r\n\r\n      {editing && (\r\n        <div className=\"mt-4 w-full max-w-2xl\">\r\n          <EditProductForm product={product} categories={categories} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAGA;AACA;;;AAJC;;;AAOc,SAAS,mBAAmB,EACzC,OAAO,EACP,UAAU,EAIX;;IACC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,4RAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,qBACE,4TAAC;QAAI,WAAU;;0BACb,4TAAC;gBAAI,WAAU;0BACb,cAAA,4TAAC;oBACC,SAAS,IAAM,WAAW,CAAC,OAAS,CAAC;oBACrC,WAAU;8BAET,UAAU,gCAAgC;;;;;;;;;;;YAI9C,yBACC,4TAAC;gBAAI,WAAU;0BACb,cAAA,4TAAC,8JAAA,CAAA,UAAe;oBAAC,SAAS;oBAAS,YAAY;;;;;;;;;;;;;;;;;AAKzD;GA3BwB;KAAA"}},
    {"offset": {"line": 2107, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2113, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/producList/deleteProduct.tsx"],"sourcesContent":["\r\n\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { deleteProduct } from \"~/app/api/action/product\";\r\nimport ConfirmDialog from \"./confirmDialog\";\r\n\r\nexport default function DeleteButton({ productId }: { productId: string }) {\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n  const confirmSave = async () => {\r\n    setShowConfirm(false);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"id\", productId);\r\n\r\n    await deleteProduct(formData);\r\n  };\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setShowConfirm(true);\r\n  };\r\n  return (\r\n    // <form action={deleteProduct} className=\"flex justify-center mt-4\">\r\n    <form onSubmit={handleSubmit} className=\"flex justify-center mt-4\">\r\n      <input type=\"hidden\" name=\"id\" value={productId} />\r\n      <button\r\n        type=\"submit\"\r\n        className=\"btn btn-error py-2 px-6 text-lg\"\r\n        style={{\r\n          width: \"auto\",\r\n          paddingLeft: \"calc(1.5rem + 140px)\",\r\n          paddingRight: \"calc(1.5rem + 140px)\",\r\n        }}\r\n      >\r\n        Удалить\r\n      </button>\r\n      {showConfirm && (\r\n        <ConfirmDialog\r\n          message=\"Вы уверены, что хотите удалить данный товар?\"\r\n          onConfirm={confirmSave}\r\n          onCancel={() => setShowConfirm(false)}\r\n        />\r\n      )}\r\n    </form>\r\n    \r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;;;AAJA;;;;AAMe,SAAS,aAAa,EAAE,SAAS,EAAyB;;IACvE,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,4RAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,cAAc;QAClB,eAAe;QAEf,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,MAAM;QAEtB,MAAM,CAAA,GAAA,yIAAA,CAAA,gBAAa,AAAD,EAAE;IACtB;IACA,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,eAAe;IACjB;IACA,OACE,qEAAqE;kBACrE,4TAAC;QAAK,UAAU;QAAc,WAAU;;0BACtC,4TAAC;gBAAM,MAAK;gBAAS,MAAK;gBAAK,OAAO;;;;;;0BACtC,4TAAC;gBACC,MAAK;gBACL,WAAU;gBACV,OAAO;oBACL,OAAO;oBACP,aAAa;oBACb,cAAc;gBAChB;0BACD;;;;;;YAGA,6BACC,4TAAC,4JAAA,CAAA,UAAa;gBACZ,SAAQ;gBACR,WAAW;gBACX,UAAU,IAAM,eAAe;;;;;;;;;;;;AAMzC;GAvCwB;KAAA"}},
    {"offset": {"line": 2190, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2196, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/rerwies/ratingSelector.tsx"],"sourcesContent":["export default function RatingSelector({\r\n  rating,\r\n  setRating,\r\n}: {\r\n  rating: number;\r\n  setRating: (rating: number) => void;\r\n}) {\r\n  return (\r\n    <div className=\"form-control mb-4\">\r\n      <label htmlFor=\"rating\" className=\"label\">\r\n        <span className=\"label-text\">Рейтинг (необязательно)</span>\r\n      </label>\r\n      <select\r\n        id=\"rating\"\r\n        value={rating}\r\n        onChange={(e) => setRating(Number(e.target.value))}\r\n        className=\"select select-bordered w-full\"\r\n      >\r\n        <option value={0}>Не задано</option>\r\n        {[1, 2, 3, 4, 5].map((num) => (\r\n          <option key={num} value={num}>\r\n            {num}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAe,SAAS,eAAe,EACrC,MAAM,EACN,SAAS,EAIV;IACC,qBACE,4TAAC;QAAI,WAAU;;0BACb,4TAAC;gBAAM,SAAQ;gBAAS,WAAU;0BAChC,cAAA,4TAAC;oBAAK,WAAU;8BAAa;;;;;;;;;;;0BAE/B,4TAAC;gBACC,IAAG;gBACH,OAAO;gBACP,UAAU,CAAC,IAAM,UAAU,OAAO,EAAE,MAAM,CAAC,KAAK;gBAChD,WAAU;;kCAEV,4TAAC;wBAAO,OAAO;kCAAG;;;;;;oBACjB;wBAAC;wBAAG;wBAAG;wBAAG;wBAAG;qBAAE,CAAC,GAAG,CAAC,CAAC,oBACpB,4TAAC;4BAAiB,OAAO;sCACtB;2BADU;;;;;;;;;;;;;;;;;AAOvB;KA3BwB"}},
    {"offset": {"line": 2268, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2274, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/rerwies/addreview.tsx"],"sourcesContent":["\r\n// \"use client\";\r\n\r\n// import { useState } from \"react\";\r\n// import { useSession } from \"next-auth/react\";\r\n// import { useRouter } from \"next/navigation\";\r\n// import RatingSelector from \"./ratingSelector\";\r\n// import { api } from \"~/trpc/react\";\r\n\r\n// interface AddReviewProps {\r\n//   productId: string;\r\n// }\r\n\r\n// export default function AddReview({ productId }: AddReviewProps) {\r\n//   const { data: session, status } = useSession();\r\n//   const router = useRouter();\r\n//   const [rating, setRating] = useState<number>(0);\r\n//   const [comment, setComment] = useState<string>(\"\");\r\n//   const [isSubmitting, setIsSubmitting] = useState<boolean>(false);\r\n//   const [error, setError] = useState<string | null>(null);\r\n\r\n//   const utils = api.useUtils();\r\n//   const createReview = api.review.create.useMutation({\r\n//     onSuccess: () => {\r\n//       setRating(0);\r\n//       setComment(\"\");\r\n//       setError(null);\r\n//       void utils.review.getByProduct.invalidate({ productId });\r\n//     },\r\n//     onError: (error) => {\r\n//       setError(error.message);\r\n//     },\r\n//     onSettled: () => {\r\n//       setIsSubmitting(false);\r\n//     },\r\n//   });\r\n\r\n//   const handleSubmit = async (e: React.FormEvent) => {\r\n//     e.preventDefault();\r\n\r\n//     if (status === \"unauthenticated\") {\r\n//       router.push(\"/auth/signin\");\r\n//       return;\r\n//     }\r\n\r\n//     if (!session?.user?.id) {\r\n//       setError(\"Ошибка авторизации. Пожалуйста, войдите снова.\");\r\n//       return;\r\n//     }\r\n\r\n//     if (!comment.trim()) {\r\n//       setError(\"Пожалуйста, оставьте комментарий\");\r\n//       return;\r\n//     }\r\n\r\n//     if (rating === 0) {\r\n//       setError(\"Пожалуйста, укажите рейтинг\");\r\n//       return;\r\n//     }\r\n\r\n//     setIsSubmitting(true);\r\n//     setError(null);\r\n\r\n//       await createReview.mutateAsync({\r\n//         productId,\r\n//         userId: session.user.id, \r\n//         rating,\r\n//         comment,\r\n//       });\r\n\r\n//   };\r\n\r\n//   if (status === \"unauthenticated\") {\r\n//     return (\r\n//       <div className=\"my-8 p-4 max-w-xl mx-auto bg-base-200 rounded-lg shadow-md\">\r\n//         <h3 className=\"text-xl font-semibold mb-4\">Оставить отзыв</h3>\r\n//         <p className=\"mb-4\">Чтобы оставить отзыв, пожалуйста, войдите в систему.</p>\r\n//         <button \r\n//           onClick={() => router.push(\"/auth/signin\")}\r\n//           className=\"btn btn-primary\"\r\n//         >\r\n//           Войти\r\n//         </button>\r\n//       </div>\r\n//     );\r\n//   }\r\n\r\n//   return (\r\n//     <div className=\"my-8 p-4 max-w-xl mx-auto bg-base-200 rounded-lg shadow-md\">\r\n//       <h3 className=\"text-xl font-semibold mb-4\">Оставить отзыв</h3>\r\n//       {error && <p className=\"text-red-500 mb-4\">{error}</p>}\r\n      \r\n//       <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n//         <div className=\"form-control\">\r\n//           <label className=\"label\">\r\n//             <span className=\"label-text\">Ваша оценка</span>\r\n//           </label>\r\n//           <RatingSelector rating={rating} setRating={setRating} />\r\n//         </div>\r\n\r\n//         <div className=\"form-control\">\r\n//           <label htmlFor=\"comment\" className=\"label\">\r\n//             <span className=\"label-text\">Ваш отзыв</span>\r\n//           </label>\r\n//           <textarea\r\n//             id=\"comment\"\r\n//             value={comment}\r\n//             onChange={(e) => setComment(e.target.value)}\r\n//             placeholder=\"Расскажите о вашем опыте...\"\r\n//             className=\"textarea textarea-bordered h-24\"\r\n//             required\r\n//           />\r\n//         </div>\r\n\r\n//         <div className=\"form-control mt-6\">\r\n//           <button\r\n//             type=\"submit\"\r\n//             className={`btn btn-primary ${isSubmitting ? \"loading\" : \"\"}`}\r\n//             disabled={isSubmitting}\r\n//           >\r\n//             {isSubmitting ? \"Отправка...\" : \"Опубликовать отзыв\"}\r\n//           </button>\r\n//         </div>\r\n//       </form>\r\n//     </div>\r\n//   );\r\n// }\r\n\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport RatingSelector from \"./ratingSelector\";\r\nimport { api } from \"~/trpc/react\";\r\n\r\ninterface AddReviewProps {\r\n  productId: string;\r\n}\r\n\r\nexport default function AddReview({ productId }: AddReviewProps) {\r\n  const { data: session, status } = useSession();\r\n  const router = useRouter();\r\n  const [rating, setRating] = useState<number>(0);\r\n  const [comment, setComment] = useState<string>(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const utils = api.useUtils();\r\n  const createReview = api.review.create.useMutation({\r\n    onSuccess: () => {\r\n      setRating(0);\r\n      setComment(\"\");\r\n      setError(null);\r\n      void utils.review.getByProduct.invalidate({ productId });\r\n    },\r\n    onError: (error) => {\r\n      setError(error.message);\r\n    },\r\n    onSettled: () => {\r\n      setIsSubmitting(false);\r\n    },\r\n  });\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (status === \"unauthenticated\") {\r\n      router.push(\"/auth/signin\");\r\n      return;\r\n    }\r\n\r\n    if (!session?.user?.id) {\r\n      setError(\"Ошибка авторизации. Пожалуйста, войдите снова.\");\r\n      return;\r\n    }\r\n\r\n    if (!comment.trim()) {\r\n      setError(\"Пожалуйста, оставьте комментарий\");\r\n      return;\r\n    }\r\n\r\n    if (rating === 0) {\r\n      setError(\"Пожалуйста, укажите рейтинг\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n\r\n    await createReview.mutateAsync({\r\n      productId,\r\n      userId: session.user.id,\r\n      rating,\r\n      comment,\r\n    });\r\n  };\r\n\r\n  if (status === \"unauthenticated\") {\r\n    return (\r\n      <div className=\"my-8 p-4 max-w-xl mx-auto bg-base-200 rounded-lg shadow-md\">\r\n        <h3 className=\"text-xl font-semibold mb-4\">Оставить отзыв</h3>\r\n        <p className=\"mb-4\">Чтобы оставить отзыв, пожалуйста, войдите в систему.</p>\r\n        <button onClick={() => router.push(\"/auth/signin\")} className=\"btn btn-primary\">\r\n          Войти\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"my-8 p-4 max-w-xl mx-auto bg-base-200 rounded-lg shadow-md\">\r\n      <h3 className=\"text-xl font-semibold mb-4\">Оставить отзыв</h3>\r\n      {error && <p className=\"text-red-500 mb-4\">{error}</p>}\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <div className=\"form-control\">\r\n          <label className=\"label\">\r\n            <span className=\"label-text\">Ваша оценка</span>\r\n          </label>\r\n          <RatingSelector rating={rating} setRating={setRating} />\r\n        </div>\r\n\r\n        <div className=\"form-control\">\r\n          <label htmlFor=\"comment\" className=\"label\">\r\n            <span className=\"label-text\">Ваш отзыв</span>\r\n          </label>\r\n          <textarea\r\n            id=\"comment\"\r\n            value={comment}\r\n            onChange={(e) => setComment(e.target.value)}\r\n            placeholder=\"Расскажите о вашем опыте...\"\r\n            className=\"textarea textarea-bordered h-24\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-control mt-6\">\r\n          <button\r\n            type=\"submit\"\r\n            className={`btn btn-primary ${isSubmitting ? \"loading\" : \"\"}`}\r\n            disabled={isSubmitting}\r\n          >\r\n            {isSubmitting ? \"Отправка...\" : \"Опубликовать отзыв\"}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2629, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}
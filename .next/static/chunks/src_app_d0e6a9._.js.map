{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/KRB2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/returns/returnAdminList.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { api } from \"~/trpc/react\";\r\n\r\nexport default function AdminReturnsList() {\r\n  const { data: returns, isLoading } = api.return.getAllReturns.useQuery();\r\n\r\n  if (isLoading) return <div className=\"text-center py-4\">Загрузка возвратов...</div>;\r\n  if (!returns || returns.length === 0) return <div className=\"text-center py-4\">Нет активных возвратов. Никто не подавал заявку</div>;\r\n\r\n  return (\r\n    <div className=\"mt-8 space-y-6\">\r\n      <h2 className=\"text-2xl font-bold\">Все возвраты</h2>\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>Пользователь</th>\r\n              <th>Заказ</th>\r\n              <th>Причина</th>\r\n              <th>Дата</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {returns.map((returnItem) => (\r\n              <tr key={returnItem.id}>\r\n                <td>{returnItem.id}</td>\r\n                <td>\r\n                  {returnItem.user.name} ({returnItem.user.email})\r\n                </td>\r\n                <td>№{returnItem.order.id}</td>\r\n                <td className=\"max-w-xs truncate\">{returnItem.reason}</td>\r\n                <td>\r\n          \r\n                </td>\r\n                <td>{new Date(returnItem.createdAt).toLocaleDateString()}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;;;AAFA;;AAIe,SAAS;;IACtB,MAAM,EAAE,MAAM,OAAO,EAAE,SAAS,EAAE,GAAG,wHAAA,CAAA,MAAG,CAAC,MAAM,CAAC,aAAa,CAAC,QAAQ;IAEtE,IAAI,WAAW,qBAAO,4SAAC;QAAI,WAAU;kBAAmB;;;;;;IACxD,IAAI,CAAC,WAAW,QAAQ,MAAM,KAAK,GAAG,qBAAO,4SAAC;QAAI,WAAU;kBAAmB;;;;;;IAE/E,qBACE,4SAAC;QAAI,WAAU;;0BACb,4SAAC;gBAAG,WAAU;0BAAqB;;;;;;0BACnC,4SAAC;gBAAI,WAAU;0BACb,cAAA,4SAAC;oBAAM,WAAU;;sCACf,4SAAC;sCACC,cAAA,4SAAC;;kDACC,4SAAC;kDAAG;;;;;;kDACJ,4SAAC;kDAAG;;;;;;kDACJ,4SAAC;kDAAG;;;;;;kDACJ,4SAAC;kDAAG;;;;;;kDACJ,4SAAC;kDAAG;;;;;;;;;;;;;;;;;sCAGR,4SAAC;sCACE,QAAQ,GAAG,CAAC,CAAC,2BACZ,4SAAC;;sDACC,4SAAC;sDAAI,WAAW,EAAE;;;;;;sDAClB,4SAAC;;gDACE,WAAW,IAAI,CAAC,IAAI;gDAAC;gDAAG,WAAW,IAAI,CAAC,KAAK;gDAAC;;;;;;;sDAEjD,4SAAC;;gDAAG;gDAAE,WAAW,KAAK,CAAC,EAAE;;;;;;;sDACzB,4SAAC;4CAAG,WAAU;sDAAqB,WAAW,MAAM;;;;;;sDACpD,4SAAC;;;;;sDAGD,4SAAC;sDAAI,IAAI,KAAK,WAAW,SAAS,EAAE,kBAAkB;;;;;;;mCAV/C,WAAW,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkBpC;GAxCwB;KAAA"}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 194, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/KRB2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/empty/returnsEmpty.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\n\r\nexport default function EmptyReturns({ placeholderImage }: { placeholderImage?: {\r\n  id: string;\r\n  name: string;\r\n  imageUrl: string;\r\n} | null;\r\n}) {\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center gap-6 p-8 text-center\">\r\n      {placeholderImage && (\r\n        <div className=\"relative w-full max-w-[500px] h-[400px]\">\r\n          <Image\r\n            src={placeholderImage.imageUrl}\r\n            alt=\"Пустой список возвратов\"\r\n            fill\r\n            style={{\r\n              objectFit: 'contain',\r\n            }}\r\n            className=\"drop-shadow-lg\"\r\n            unoptimized={true}\r\n            priority\r\n          />\r\n        </div>\r\n      )}\r\n      <p className=\"text-xl text-gray-700 mt-4\">\r\n        Список возвратов пуст.{\" \"}\r\n        <Link \r\n          href=\"/cart\" \r\n          className=\"text-blue-600 underline hover:text-blue-800 font-medium\"\r\n        >\r\n          Посмотреть мои заказы\r\n        </Link>\r\n      </p>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKe,SAAS,aAAa,EAAE,gBAAgB,EAKtD;IACC,qBACE,4SAAC;QAAI,WAAU;;YACZ,kCACC,4SAAC;gBAAI,WAAU;0BACb,cAAA,4SAAC,+OAAA,CAAA,UAAK;oBACJ,KAAK,iBAAiB,QAAQ;oBAC9B,KAAI;oBACJ,IAAI;oBACJ,OAAO;wBACL,WAAW;oBACb;oBACA,WAAU;oBACV,aAAa;oBACb,QAAQ;;;;;;;;;;;0BAId,4SAAC;gBAAE,WAAU;;oBAA6B;oBACjB;kCACvB,4SAAC,8QAAA,CAAA,UAAI;wBACH,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT;KAlCwB"}},
    {"offset": {"line": 263, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 269, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/KRB2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/returns/returnList.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { api } from \"~/trpc/react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport EmptyReturns from \"../empty/returnsEmpty\";\r\n\r\ninterface ReturnsListProps {\r\n  placeholderImage: {\r\n    id: string;\r\n    name: string;\r\n    imageUrl: string;\r\n  } | null;\r\n}\r\n\r\nexport default function ReturnsList({ placeholderImage }: ReturnsListProps) {\r\n  const [isClient, setIsClient] = useState(false);\r\n  const { data: returns, isLoading: isReturnsLoading, refetch: refetchReturns } = api.return.getMyReturns.useQuery();\r\n  const { data: userOrders, isLoading: isOrdersLoading } = api.order.getUserOrders.useQuery();\r\n\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [reason, setReason] = useState(\"\");\r\n  const [selectedOrderId, setSelectedOrderId] = useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setIsClient(true);\r\n  }, []);\r\n\r\n  const createReturn = api.return.create.useMutation({\r\n    onSuccess: async () => {\r\n      setShowForm(false);\r\n      setReason(\"\");\r\n      setError(\"\");\r\n      await refetchReturns();\r\n    },\r\n    onError: (err) => {\r\n      setError(err.message);\r\n    },\r\n    onSettled: () => {\r\n      setIsSubmitting(false);\r\n    },\r\n  });\r\n  const [quantity, setQuantity] = useState(1);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!reason.trim()) {\r\n      setError(\"Укажите причину возврата\");\r\n      return;\r\n    }\r\n    if (!selectedOrderId) {\r\n      setError(\"Выберите заказ\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    createReturn.mutate({\r\n      orderId: selectedOrderId, reason,\r\n      quantity\r\n    });\r\n  };\r\n\r\n  if (!isClient || isReturnsLoading || isOrdersLoading) {\r\n    return <div className=\"text-center py-4\">Загрузка...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"mt-8 space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <h2 className=\"text-2xl font-bold\">Мои возвраты</h2>\r\n        {!showForm && (\r\n          <button \r\n            onClick={() => setShowForm(true)}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition\"\r\n          >\r\n            Подать заявку на возврат\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {showForm && (\r\n        <div className=\"p-6 border rounded-lg bg-gray-50\">\r\n          <h3 className=\"text-xl font-semibold mb-4\">Новая заявка на возврат</h3>\r\n          \r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div className=\"form-control\">\r\n              <label className=\"label\">\r\n                <span className=\"label-text\">Выберите заказ</span>\r\n              </label>\r\n              <select\r\n                value={selectedOrderId}\r\n                onChange={(e) => setSelectedOrderId(e.target.value)}\r\n                className=\"select select-bordered w-full\"\r\n                required\r\n              >\r\n                <option value=\"\">-- Выберите заказ --</option>\r\n                {userOrders?.map(order => (\r\n                  <option \r\n                    key={order.id}\r\n                    value={order.id}\r\n                  >\r\n                    Заказ #{order.id} - {new Date(order.createdAt).toLocaleDateString()}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"form-control\">\r\n              <label className=\"label\">\r\n                <span className=\"label-text\">Причина возврата</span>\r\n              </label>\r\n              <textarea\r\n                value={reason}\r\n                onChange={(e) => setReason(e.target.value)}\r\n                className=\"textarea textarea-bordered h-32\"\r\n                placeholder=\"Опишите причину возврата...\"\r\n                required\r\n                minLength={10}\r\n              />\r\n              \r\n            </div>\r\n                    <div className=\"form-control\">\r\n  <label className=\"label\">\r\n    <span className=\"label-text\">Количество*</span>\r\n  </label>\r\n  <input\r\n    type=\"number\"\r\n    value={quantity}\r\n    onChange={(e) => setQuantity(Number(e.target.value))}\r\n    min={1}\r\n    className=\"input input-bordered\"\r\n    required\r\n  />\r\n</div>\r\n\r\n            {error && <div className=\"text-red-500\">{error}</div>}\r\n\r\n            <div className=\"flex gap-4\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowForm(false)}\r\n                className=\"btn btn-outline flex-1\"\r\n              >\r\n                Отмена\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                className={`btn btn-primary flex-1 ${isSubmitting ? \"loading\" : \"\"}`}\r\n                disabled={isSubmitting}\r\n              >\r\n                {isSubmitting ? \"Отправка...\" : \"Отправить заявку\"}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      {userOrders?.length === 0 && (\r\n        <EmptyReturns placeholderImage={placeholderImage} />\r\n      )}\r\n\r\n      {(!returns || returns.length === 0) && !showForm && userOrders && userOrders.length > 0 ? (\r\n\r\n        <EmptyReturns placeholderImage={placeholderImage} />\r\n\r\n      ) : (\r\n        returns?.map((returnItem) => (\r\n          <div key={returnItem.id} className=\"p-4 border rounded-lg\">\r\n            <div className=\"flex justify-between items-start\">\r\n              <div>\r\n                <h3 className=\"font-semibold\">Заказ №{returnItem.order.id}</h3>\r\n                <p className=\"text-sm text-gray-500\">\r\n                  Сумма: {returnItem.order.totalAmount.toString()} ₽\r\n                </p>\r\n                <p className=\"text-sm text-gray-500\">\r\n                  Дата: {new Date(returnItem.createdAt).toLocaleDateString()}\r\n                </p>\r\n              </div>\r\n\r\n            </div>\r\n            <div className=\"mt-2\">\r\n              <p className=\"text-gray-700\">{returnItem.reason}</p>\r\n            </div>\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 667, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}
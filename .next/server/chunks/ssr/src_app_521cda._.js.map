{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/KRB2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/official/back.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function BackButton() {\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <button\r\n      onClick={() => router.back()}\r\n      className=\"text-purple-600 hover:text-purple-800 transition-colors flex items-center\"\r\n    >\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        className=\"h-5 w-5 mr-1\"\r\n        viewBox=\"0 0 20 20\"\r\n        fill=\"currentColor\"\r\n      >\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          d=\"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\"\r\n          clipRule=\"evenodd\"\r\n        />\r\n      </svg>\r\n      Назад\r\n    </button>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,iPAAA,CAAA,YAAS,AAAD;IAEvB,qBACE,6VAAC;QACC,SAAS,IAAM,OAAO,IAAI;QAC1B,WAAU;;0BAEV,6VAAC;gBACC,OAAM;gBACN,WAAU;gBACV,SAAQ;gBACR,MAAK;0BAEL,cAAA,6VAAC;oBACC,UAAS;oBACT,GAAE;oBACF,UAAS;;;;;;;;;;;YAEP;;;;;;;AAIZ"}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/KRB2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/producList/productUI.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from \"react\";\r\nimport { notFound } from \"next/navigation\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport BackButton from \"../official/back\";\r\n\r\nexport default function ProductDetails({ product }: { product: any }) {\r\n  const [currentSlide, setCurrentSlide] = useState(0);\r\n  const router = useRouter(); \r\n\r\n  if (!product) return notFound();\r\n\r\n  const images = product.images?.length\r\n    ? product.images\r\n    : [{ url: product.imageUrl || \"/placeholder-product.jpg\" }];\r\n\r\n  return (\r\n    <div className=\"container mx-auto py-8 px-6 max-w-3xl\">\r\n        <div className=\"mb-8\">\r\n        <BackButton />\r\n      </div>\r\n      <h1 className=\"text-4xl font-extrabold text-gray-900 mb-6\">{product.name}</h1>\r\n\r\n      <div className=\"relative w-full overflow-hidden rounded-lg bg-gray-100 aspect-[4/3] mb-6\">\r\n        <div\r\n          className=\"flex transition-transform duration-300 ease-in-out\"\r\n          style={{ transform: `translateX(-${currentSlide * 100}%)` }}\r\n        >\r\n          {images.map((img: any, idx: number) => (\r\n            <img\r\n              key={idx}\r\n              src={img.url}\r\n              alt={product.name}\r\n              className=\"w-full h-full object-cover shrink-0 grow-0 basis-full\"\r\n            />\r\n          ))}\r\n        </div>\r\n\r\n        {images.length > 1 && (\r\n          <>\r\n            <button\r\n              onClick={() =>\r\n                setCurrentSlide((prev) => (prev - 1 + images.length) % images.length)\r\n              }\r\n              className=\"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white/80 px-2 py-1 rounded-full shadow\"\r\n            >\r\n              ‹\r\n            </button>\r\n            <button\r\n              onClick={() =>\r\n                setCurrentSlide((prev) => (prev + 1) % images.length)\r\n              }\r\n              className=\"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white/80 px-2 py-1 rounded-full shadow\"\r\n            >\r\n              ›\r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <p className=\"text-lg text-gray-800 mb-4\">{product.description}</p>\r\n\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <p className=\"text-2xl font-semibold text-blue-600\">\r\n          {Number(product.price.toString()).toLocaleString(\"ru-RU\", {\r\n            style: \"currency\",\r\n            currency: \"RUB\",\r\n          })}\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"bg-gray-100 p-4 rounded-lg shadow-md mb-6\">\r\n        <p className=\"text-sm text-gray-500 mb-1\">\r\n          <strong>Категория:</strong> <span className=\"font-medium\">{product.category.name}</span>\r\n        </p>\r\n        <p className=\"text-sm text-gray-500 mb-1\">\r\n          <strong>На складе:</strong> <span className=\"font-medium\">{product.stock}</span>\r\n        </p>\r\n        <p className=\"text-sm text-gray-500 mb-1\">\r\n          <strong>Создано:</strong>{\" \"}\r\n          {new Date(product.createdAt).toLocaleDateString(\"ru-RU\", {\r\n            day: \"numeric\",\r\n            month: \"long\",\r\n            year: \"numeric\",\r\n          })}\r\n        </p>\r\n        <p className=\"text-sm text-gray-500 mb-4\">\r\n          <strong>Обновлено:</strong>{\" \"}\r\n          {new Date(product.updatedAt).toLocaleDateString(\"ru-RU\", {\r\n            day: \"numeric\",\r\n            month: \"long\",\r\n            year: \"numeric\",\r\n          })}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;;AAOe,SAAS,eAAe,EAAE,OAAO,EAAoB;IAClE,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,oTAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,SAAS,CAAA,GAAA,iPAAA,CAAA,YAAS,AAAD;IAEvB,IAAI,CAAC,SAAS,OAAO,CAAA,GAAA,iPAAA,CAAA,WAAQ,AAAD;IAE5B,MAAM,SAAS,QAAQ,MAAM,EAAE,SAC3B,QAAQ,MAAM,GACd;QAAC;YAAE,KAAK,QAAQ,QAAQ,IAAI;QAA2B;KAAE;IAE7D,qBACE,6VAAC;QAAI,WAAU;;0BACX,6VAAC;gBAAI,WAAU;0BACf,cAAA,6VAAC,8IAAA,CAAA,UAAU;;;;;;;;;;0BAEb,6VAAC;gBAAG,WAAU;0BAA8C,QAAQ,IAAI;;;;;;0BAExE,6VAAC;gBAAI,WAAU;;kCACb,6VAAC;wBACC,WAAU;wBACV,OAAO;4BAAE,WAAW,CAAC,YAAY,EAAE,eAAe,IAAI,EAAE,CAAC;wBAAC;kCAEzD,OAAO,GAAG,CAAC,CAAC,KAAU,oBACrB,6VAAC;gCAEC,KAAK,IAAI,GAAG;gCACZ,KAAK,QAAQ,IAAI;gCACjB,WAAU;+BAHL;;;;;;;;;;oBAQV,OAAO,MAAM,GAAG,mBACf;;0CACE,6VAAC;gCACC,SAAS,IACP,gBAAgB,CAAC,OAAS,CAAC,OAAO,IAAI,OAAO,MAAM,IAAI,OAAO,MAAM;gCAEtE,WAAU;0CACX;;;;;;0CAGD,6VAAC;gCACC,SAAS,IACP,gBAAgB,CAAC,OAAS,CAAC,OAAO,CAAC,IAAI,OAAO,MAAM;gCAEtD,WAAU;0CACX;;;;;;;;;;;;;;0BAOP,6VAAC;gBAAE,WAAU;0BAA8B,QAAQ,WAAW;;;;;;0BAE9D,6VAAC;gBAAI,WAAU;0BACb,cAAA,6VAAC;oBAAE,WAAU;8BACV,OAAO,QAAQ,KAAK,CAAC,QAAQ,IAAI,cAAc,CAAC,SAAS;wBACxD,OAAO;wBACP,UAAU;oBACZ;;;;;;;;;;;0BAIJ,6VAAC;gBAAI,WAAU;;kCACb,6VAAC;wBAAE,WAAU;;0CACX,6VAAC;0CAAO;;;;;;4BAAmB;0CAAC,6VAAC;gCAAK,WAAU;0CAAe,QAAQ,QAAQ,CAAC,IAAI;;;;;;;;;;;;kCAElF,6VAAC;wBAAE,WAAU;;0CACX,6VAAC;0CAAO;;;;;;4BAAmB;0CAAC,6VAAC;gCAAK,WAAU;0CAAe,QAAQ,KAAK;;;;;;;;;;;;kCAE1E,6VAAC;wBAAE,WAAU;;0CACX,6VAAC;0CAAO;;;;;;4BAAkB;4BACzB,IAAI,KAAK,QAAQ,SAAS,EAAE,kBAAkB,CAAC,SAAS;gCACvD,KAAK;gCACL,OAAO;gCACP,MAAM;4BACR;;;;;;;kCAEF,6VAAC;wBAAE,WAAU;;0CACX,6VAAC;0CAAO;;;;;;4BAAoB;4BAC3B,IAAI,KAAK,QAAQ,SAAS,EAAE,kBAAkB,CAAC,SAAS;gCACvD,KAAK;gCACL,OAAO;gCACP,MAAM;4BACR;;;;;;;;;;;;;;;;;;;AAKV"}},
    {"offset": {"line": 285, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/KRB2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/api/action/product.ts"],"sourcesContent":["// \"use server\";\r\n\r\n// import { revalidatePath } from \"next/cache\";\r\n// import { redirect } from \"next/navigation\";\r\n// import { z } from \"zod\";\r\n// import { auth } from \"~/server/auth\";\r\n// import { db } from \"~/server/db\";\r\n// import { createClient } from '@supabase/supabase-js';\r\n// export async function createProduct(formData: FormData) {\r\n//   const fd = z\r\n//     .object({\r\n//       name: z.string(),\r\n//       description: z.string(),\r\n//       price: z.coerce.number().positive(),\r\n//       imageUrl: z.string().url().optional().or(z.literal(\"\")),\r\n//       categoryId: z.string(),\r\n//     })\r\n//     .parse({\r\n//       name: formData.get(\"name\"),\r\n//       description: formData.get(\"description\"),\r\n//       price: formData.get(\"price\"),\r\n//       imageUrl: formData.get(\"imageUrl\"),\r\n//       categoryId: formData.get(\"categoryId\"),\r\n//     });\r\n\r\n//   await db.product.create({\r\n//     data: {\r\n//       name: fd.name,\r\n//       description: fd.description,\r\n//       price: fd.price,\r\n//       imageUrl: fd.imageUrl || \"\",\r\n//       categoryId: fd.categoryId,\r\n//     },\r\n//   });\r\n\r\n//   revalidatePath(\"/product\");\r\n//   redirect(\"/product\"); \r\n// }\r\n// const supabase = createClient(\r\n//   process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n//   process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n// );\r\n\r\n// // export async function createProduct(formData: FormData) {\r\n// //   const name = formData.get(\"name\") as string;\r\n// //   const description = formData.get(\"description\") as string;\r\n// //   const price = parseFloat(formData.get(\"price\") as string);\r\n// //   const categoryId = formData.get(\"categoryId\") as string;\r\n// //   const file = formData.get(\"image\") as File;\r\n\r\n// //   if (!file || file.size === 0) throw new Error(\"Файл изображения не выбран\");\r\n\r\n// //   const filePath = `products/${Date.now()}-${file.name}`;\r\n\r\n// //   // Загрузка в Supabase Storage\r\n// //   const { error: uploadError } = await supabase.storage\r\n// //     .from('product-images')\r\n// //     .upload(filePath, file, { upsert: true });\r\n\r\n// //   if (uploadError) throw uploadError;\r\n\r\n// //   const { data: imageData } = supabase\r\n// //     .storage\r\n// //     .from('product-images')\r\n// //     .getPublicUrl(filePath);\r\n\r\n// //   const imageUrl = imageData?.publicUrl;\r\n\r\n// //   if (!imageUrl) throw new Error(\"Не удалось получить URL изображения\");\r\n\r\n// //   // Сохранение в PostgreSQL\r\n// //   await db.product.create({\r\n// //     data: {\r\n// //       name,\r\n// //       description,\r\n// //       price,\r\n// //       categoryId,\r\n// //       imageUrl,\r\n// //     },\r\n// //   });\r\n\r\n// //   redirect('/admin/products'); // или куда тебе нужно\r\n// // }\r\n\r\n// export async function updateProduct(formData: FormData) {\r\n//   const data = z\r\n//     .object({\r\n//       id: z.string(),\r\n//       name: z.string(),\r\n//       description: z.string().optional(),\r\n//       price: z.coerce.number().nonnegative(),\r\n//       imageUrl: z.string().url().optional(),\r\n//       categoryId: z.string().optional(),\r\n//     })\r\n//     .parse({\r\n//       id: formData.get(\"id\"),\r\n//       name: formData.get(\"name\"),\r\n//       description: formData.get(\"description\"),\r\n//       price: formData.get(\"price\"),\r\n//       imageUrl: formData.get(\"imageUrl\"),\r\n//       categoryId: formData.get(\"categoryId\"),\r\n//     });\r\n\r\n//   await db.product.update({\r\n//     where: { id: data.id },\r\n//     data: {\r\n//       name: data.name,\r\n//       description: data.description,\r\n//       price: data.price,\r\n//       imageUrl: data.imageUrl,\r\n//       categoryId: data.categoryId,\r\n//     },\r\n//   });\r\n\r\n//   revalidatePath(`/products/${data.id}`); \r\n// }\r\n\r\n// export async function deleteProduct(formData: FormData) {\r\n//     const fd = z\r\n//       .object({\r\n//         id: z.string(),\r\n//       })\r\n//       .parse({\r\n//         id: formData.get(\"id\"),\r\n//       });\r\n//     await db.product.delete({ where: { id: fd.id } });\r\n//     redirect(\"/product\");\r\n//   }\r\n\r\n\r\n// export async function addProductCart(formData: FormData) {\r\n//   const session = await auth();\r\n\r\n//   if (!session?.user?.id) {\r\n//     throw new Error(\"Пользователь не авторизован\");\r\n//   }\r\n\r\n//   const { productId } = z\r\n//     .object({\r\n//       productId: z.string(),\r\n//     })\r\n//     .parse({\r\n//       productId: formData.get(\"productId\"),\r\n//     });\r\n\r\n//   const existingCartItem = await db.cartItem.findFirst({\r\n//     where: {\r\n//       userId: session.user.id,\r\n//       productId,\r\n//     },\r\n//   });\r\n\r\n//   if (existingCartItem) {\r\n//     await db.cartItem.update({\r\n//       where: { id: existingCartItem.id },\r\n//       data: { quantity: { increment: 1 } },\r\n//     });\r\n//   } else {\r\n//     await db.cartItem.create({\r\n//       data: {\r\n//         userId: session.user.id,\r\n//         productId,\r\n//         quantity: 1,\r\n//       },\r\n//     });\r\n//   }\r\n\r\n//    redirect(\"/cart\");\r\n// }\r\n\"use server\";\r\n\r\nimport { redirect } from \"next/navigation\";\r\nimport { z } from \"zod\";\r\nimport { auth } from \"~/server/auth\";\r\nimport { db } from \"~/server/db\";\r\n\r\n// export async function createProduct(formData: FormData) {\r\n//   const fd = z\r\n//     .object({\r\n//       name: z.string(),\r\n//       description: z.string(),\r\n//       price: z.coerce.number().positive(),\r\n//       imageUrl: z.string().url().optional().or(z.literal(\"\")),\r\n//       categoryId: z.string(),\r\n//     })\r\n//     .parse({\r\n//       name: formData.get(\"name\"),\r\n//       description: formData.get(\"description\"),\r\n//       price: formData.get(\"price\"),\r\n//       imageUrl: formData.get(\"imageUrl\"),\r\n//       categoryId: formData.get(\"categoryId\"),\r\n//     });\r\n\r\n//   await db.product.create({\r\n//     data: {\r\n//       name: fd.name,\r\n//       description: fd.description,\r\n//       price: fd.price,\r\n//       imageUrl: fd.imageUrl || \"\",\r\n//       categoryId: fd.categoryId,\r\n//     },\r\n//   });\r\n\r\n//   revalidatePath(\"/product\");\r\n//   redirect(\"/product\"); \r\n// }\r\n// export async function createProduct(formData: FormData) {\r\n//   const name = formData.get(\"name\") as string;\r\n//   const description = formData.get(\"description\") as string;\r\n//   const price = Number(formData.get(\"price\"));\r\n//   const categoryId = formData.get(\"categoryId\") as string;\r\n//   const imageUrl = formData.get(\"imageUrl\") as string;\r\n\r\n//   if (!imageUrl) throw new Error(\"Изображение не выбрано\");\r\n\r\n//   await db.product.create({\r\n//     data: {\r\n//       name,\r\n//       description,\r\n//       price,\r\n//       categoryId,\r\n//       imageUrl,\r\n//     },\r\n//   });\r\n\r\n//   redirect(\"/product\");\r\n// }\r\nexport async function createProduct(formData: FormData) {\r\n  const name = formData.get(\"name\") as string;\r\n  const description = formData.get(\"description\") as string;\r\n  const price = Number(formData.get(\"price\"));\r\n  const stock = Number(formData.get(\"stock\"));\r\n  const categoryId = formData.get(\"categoryId\") as string;\r\n  const imageUrls = formData.getAll(\"imageUrls\") as string[];\r\n\r\n  if (!imageUrls.length) throw new Error(\"Не выбраны изображения\");\r\n\r\n  const product = await db.product.create({\r\n    data: {\r\n      name,\r\n      description,\r\n      price,\r\n      stock,\r\n      categoryId,\r\n      images: {\r\n        create: imageUrls.map((url) => ({ url })),\r\n      },\r\n    },\r\n  });\r\n\r\n  redirect(`/product/${product.id}`);\r\n}\r\n\r\nconst productUpdateSchema = z.object({\r\n  id: z.string().cuid(),\r\n  name: z.string().min(1),\r\n  description: z.string().optional(),\r\n  price: z.number().nonnegative(),\r\n  imageUrl: z.string().url().optional(),\r\n  categoryId: z.string().cuid(),\r\n});\r\n\r\n export async function updateProduct(data: unknown) {\r\n  // Валидируем входные данные, чтобы получить типизированный объект\r\n  const parsedData = productUpdateSchema.parse(data);\r\n\r\n  // Формируем массив для создания изображений, если URL валиден\r\n  const imagesData = parsedData.imageUrl ? [{ url: parsedData.imageUrl }] : [];\r\n\r\n  await db.product.update({\r\n    where: { id: parsedData.id },\r\n    data: {\r\n      name: parsedData.name,\r\n      description: parsedData.description,\r\n      price: parsedData.price,\r\n      images: {\r\n        deleteMany: {},\r\n        create: imagesData,\r\n      },\r\n      categoryId: parsedData.categoryId,\r\n    },\r\n  });\r\n}\r\nexport async function deleteProduct(formData: FormData) {\r\n    const fd = z\r\n      .object({\r\n        id: z.string(),\r\n      })\r\n      .parse({\r\n        id: formData.get(\"id\"),\r\n      });\r\n    await db.product.delete({ where: { id: fd.id } });\r\n    redirect(\"/product\");\r\n  }\r\n\r\n\r\n// export async function addProductCart(formData: FormData) {\r\n//   const session = await auth();\r\n\r\n//   if (!session?.user?.id) {\r\n//     throw new Error(\"Пользователь не авторизован\");\r\n//   }\r\n\r\n//   const { productId } = z\r\n//     .object({\r\n//       productId: z.string(),\r\n//     })\r\n//     .parse({\r\n//       productId: formData.get(\"productId\"),\r\n//     });\r\n\r\n//   const existingCartItem = await db.cartItem.findFirst({\r\n//     where: {\r\n//       userId: session.user.id,\r\n//       productId,\r\n//     },\r\n//   });\r\n\r\n//   if (existingCartItem) {\r\n//     await db.cartItem.update({\r\n//       where: { id: existingCartItem.id },\r\n//       data: { quantity: { increment: 1 } },\r\n//     });\r\n//   } else {\r\n//     await db.cartItem.create({\r\n//       data: {\r\n//         userId: session.user.id,\r\n//         productId,\r\n//         quantity: 1,\r\n//       },\r\n//     });\r\n//   }\r\n\r\n//    redirect(\"/cart\");\r\n// }\r\nexport async function addProductCart(formData: FormData) {\r\n  const session = await auth();\r\n\r\n  if (!session?.user?.id) {\r\n    throw new Error(\"Пользователь не авторизован\");\r\n  }\r\n\r\n  const { productId, quantity } = z\r\n    .object({\r\n      productId: z.string(),\r\n      quantity: z.string().transform((val) => parseInt(val, 10)),\r\n    })\r\n    .parse({\r\n      productId: formData.get(\"productId\"),\r\n      quantity: formData.get(\"quantity\"),\r\n    });\r\n\r\n  const existingCartItem = await db.cartItem.findFirst({\r\n    where: {\r\n      userId: session.user.id,\r\n      productId,\r\n    },\r\n  });\r\n\r\n  if (existingCartItem) {\r\n    await db.cartItem.update({\r\n      where: { id: existingCartItem.id },\r\n      data: { quantity: { increment: quantity } },\r\n    });\r\n  } else {\r\n    await db.cartItem.create({\r\n      data: {\r\n        userId: session.user.id,\r\n        productId,\r\n        quantity,\r\n      },\r\n    });\r\n  }\r\n\r\n  redirect(\"/cart\");\r\n}\r\n"],"names":[],"mappings":"AAAA,gBAAgB;AAEhB,+CAA+C;AAC/C,8CAA8C;AAC9C,2BAA2B;AAC3B,wCAAwC;AACxC,oCAAoC;AACpC,wDAAwD;AACxD,4DAA4D;AAC5D,iBAAiB;AACjB,gBAAgB;AAChB,0BAA0B;AAC1B,iCAAiC;AACjC,6CAA6C;AAC7C,iEAAiE;AACjE,gCAAgC;AAChC,SAAS;AACT,eAAe;AACf,oCAAoC;AACpC,kDAAkD;AAClD,sCAAsC;AACtC,4CAA4C;AAC5C,gDAAgD;AAChD,UAAU;AAEV,8BAA8B;AAC9B,cAAc;AACd,uBAAuB;AACvB,qCAAqC;AACrC,yBAAyB;AACzB,qCAAqC;AACrC,mCAAmC;AACnC,SAAS;AACT,QAAQ;AAER,gCAAgC;AAChC,2BAA2B;AAC3B,IAAI;AACJ,iCAAiC;AACjC,2CAA2C;AAC3C,+CAA+C;AAC/C,KAAK;AAEL,+DAA+D;AAC/D,oDAAoD;AACpD,kEAAkE;AAClE,kEAAkE;AAClE,gEAAgE;AAChE,mDAAmD;AAEnD,oFAAoF;AAEpF,+DAA+D;AAE/D,sCAAsC;AACtC,6DAA6D;AAC7D,iCAAiC;AACjC,oDAAoD;AAEpD,2CAA2C;AAE3C,4CAA4C;AAC5C,kBAAkB;AAClB,iCAAiC;AACjC,kCAAkC;AAElC,8CAA8C;AAE9C,8EAA8E;AAE9E,kCAAkC;AAClC,iCAAiC;AACjC,iBAAiB;AACjB,iBAAiB;AACjB,wBAAwB;AACxB,kBAAkB;AAClB,uBAAuB;AACvB,qBAAqB;AACrB,YAAY;AACZ,WAAW;AAEX,2DAA2D;AAC3D,OAAO;AAEP,4DAA4D;AAC5D,mBAAmB;AACnB,gBAAgB;AAChB,wBAAwB;AACxB,0BAA0B;AAC1B,4CAA4C;AAC5C,gDAAgD;AAChD,+CAA+C;AAC/C,2CAA2C;AAC3C,SAAS;AACT,eAAe;AACf,gCAAgC;AAChC,oCAAoC;AACpC,kDAAkD;AAClD,sCAAsC;AACtC,4CAA4C;AAC5C,gDAAgD;AAChD,UAAU;AAEV,8BAA8B;AAC9B,8BAA8B;AAC9B,cAAc;AACd,yBAAyB;AACzB,uCAAuC;AACvC,2BAA2B;AAC3B,iCAAiC;AACjC,qCAAqC;AACrC,SAAS;AACT,QAAQ;AAER,6CAA6C;AAC7C,IAAI;AAEJ,4DAA4D;AAC5D,mBAAmB;AACnB,kBAAkB;AAClB,0BAA0B;AAC1B,WAAW;AACX,iBAAiB;AACjB,kCAAkC;AAClC,YAAY;AACZ,yDAAyD;AACzD,4BAA4B;AAC5B,MAAM;AAGN,6DAA6D;AAC7D,kCAAkC;AAElC,8BAA8B;AAC9B,sDAAsD;AACtD,MAAM;AAEN,4BAA4B;AAC5B,gBAAgB;AAChB,+BAA+B;AAC/B,SAAS;AACT,eAAe;AACf,8CAA8C;AAC9C,UAAU;AAEV,2DAA2D;AAC3D,eAAe;AACf,iCAAiC;AACjC,mBAAmB;AACnB,SAAS;AACT,QAAQ;AAER,4BAA4B;AAC5B,iCAAiC;AACjC,4CAA4C;AAC5C,8CAA8C;AAC9C,UAAU;AACV,aAAa;AACb,iCAAiC;AACjC,gBAAgB;AAChB,mCAAmC;AACnC,qBAAqB;AACrB,uBAAuB;AACvB,WAAW;AACX,UAAU;AACV,MAAM;AAEN,wBAAwB;AACxB,IAAI;;;;;;;;;IA2DkB;IAmCC;IAqBD;IAoDA"}},
    {"offset": {"line": 448, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 454, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/KRB2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/producList/addToCartButton.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { startTransition, useState } from \"react\";\r\nimport { addProductCart } from \"~/app/api/action/product\";\r\n\r\nexport default function ProductPage({ productId, stock }: { productId: string, stock: number }) {\r\n  const [quantity, setQuantity] = useState(1);\r\n  const increase = () => {\r\n    if (quantity < stock) {\r\n      startTransition(() => setQuantity((q) => q + 1));\r\n    }\r\n  };\r\n  const decrease = () => {\r\n    if (quantity > 1) {\r\n      startTransition(() => setQuantity((q) => q - 1));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form\r\n      action={addProductCart}\r\n      className=\"mt-6 flex flex-col items-center gap-6 rounded-xl border p-6 shadow-md\"\r\n    >\r\n      <input type=\"hidden\" name=\"productId\" value={productId} />\r\n      <input type=\"hidden\" name=\"quantity\" value={quantity} />\r\n\r\n      <div className=\"flex flex-col items-center gap-2\">\r\n        <span className=\"text-lg font-medium text-gray-700\">Количество</span>\r\n        <div className=\"flex items-center rounded-full border bg-white px-4 py-2 shadow-sm\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={decrease}\r\n            className=\"text-xl font-bold text-gray-600 hover:text-black focus:outline-none\"\r\n          >\r\n            −\r\n          </button>\r\n          <span className=\"mx-4 w-6 text-center text-lg font-medium\">{quantity}</span>\r\n          <button\r\n            type=\"button\"\r\n            onClick={increase}\r\n            className=\"text-xl font-bold text-gray-600 hover:text-black focus:outline-none\"\r\n          >\r\n            +\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <button\r\n        type=\"submit\"\r\n        className=\"rounded-full bg-blue-600 px-6 py-3 text-lg font-semibold text-white transition hover:bg-blue-700\"\r\n      >\r\n        Добавить в корзину\r\n      </button>\r\n    </form>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKe,SAAS,YAAY,EAAE,SAAS,EAAE,KAAK,EAAwC;IAC5F,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,oTAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,WAAW;QACf,IAAI,WAAW,OAAO;YACpB,CAAA,GAAA,oTAAA,CAAA,kBAAe,AAAD,EAAE,IAAM,YAAY,CAAC,IAAM,IAAI;QAC/C;IACF;IACA,MAAM,WAAW;QACf,IAAI,WAAW,GAAG;YAChB,CAAA,GAAA,oTAAA,CAAA,kBAAe,AAAD,EAAE,IAAM,YAAY,CAAC,IAAM,IAAI;QAC/C;IACF;IAEA,qBACE,6VAAC;QACC,QAAQ,sIAAA,CAAA,iBAAc;QACtB,WAAU;;0BAEV,6VAAC;gBAAM,MAAK;gBAAS,MAAK;gBAAY,OAAO;;;;;;0BAC7C,6VAAC;gBAAM,MAAK;gBAAS,MAAK;gBAAW,OAAO;;;;;;0BAE5C,6VAAC;gBAAI,WAAU;;kCACb,6VAAC;wBAAK,WAAU;kCAAoC;;;;;;kCACpD,6VAAC;wBAAI,WAAU;;0CACb,6VAAC;gCACC,MAAK;gCACL,SAAS;gCACT,WAAU;0CACX;;;;;;0CAGD,6VAAC;gCAAK,WAAU;0CAA4C;;;;;;0CAC5D,6VAAC;gCACC,MAAK;gCACL,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;;;;;;;;0BAML,6VAAC;gBACC,MAAK;gBACL,WAAU;0BACX;;;;;;;;;;;;AAKP"}},
    {"offset": {"line": 568, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 574, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/KRB2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/rerwies/reply.tsx"],"sourcesContent":["import { PencilSquareIcon, TrashIcon } from \"@heroicons/react/24/outline\";\r\nexport default function Reply(\r\n    {\r\n      reply,\r\n      currentUser,\r\n      editingReviewId,\r\n      setEditingReviewId,\r\n      editText,\r\n      setEditText,\r\n      deleteMutation,\r\n      updateMutation,\r\n    }: {\r\n      reply: {\r\n        id: string;\r\n        userId: string;\r\n        createdAt: Date;\r\n        comment: string | null;\r\n        user: {\r\n          name: string | null;\r\n          surname: string | null;\r\n          image: string | null;\r\n        };\r\n      };\r\n      currentUser: { id: string } | null;\r\n      editingReviewId: string | null;\r\n      setEditingReviewId: (id: string | null) => void;\r\n      editText: string;\r\n      setEditText: (text: string) => void;\r\n      deleteMutation: any;\r\n      updateMutation: any;\r\n    }\r\n  ) {\r\n  const isEditing = editingReviewId === reply.id;\r\n  const canEdit = currentUser?.id === reply.userId;\r\n\r\n  return (\r\n    <div className=\"text-sm text-left relative p-2 border rounded-lg\">\r\n      <div className=\"font-semibold\">\r\n        {reply.user.name || \"Аноним\"} {reply.user.surname || \"\"}\r\n      </div>\r\n\r\n      {isEditing ? (\r\n        <div className=\"space-y-2 mt-1\">\r\n          <textarea\r\n            className=\"w-full border p-2 rounded\"\r\n            value={editText}\r\n            onChange={(e) => setEditText(e.target.value)}\r\n          />\r\n          <div className=\"flex gap-2\">\r\n            <button\r\n              onClick={() => {\r\n                updateMutation.mutate({\r\n                  reviewId: reply.id,\r\n                  comment: editText,\r\n                  rating: 0,\r\n                });\r\n                setEditingReviewId(null);\r\n              }}\r\n              className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n            >\r\n              Сохранить\r\n            </button>\r\n            <button\r\n              onClick={() => setEditingReviewId(null)}\r\n              className=\"px-3 py-1 bg-gray-300 rounded hover:bg-gray-400\"\r\n            >\r\n              Отмена\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <p className=\"text-gray-700 mt-1\">{reply.comment ?? \"\"}</p>\r\n      )}\r\n\r\n      <div className=\"text-xs text-gray-500 mt-1\">\r\n        {new Date(reply.createdAt).toLocaleDateString()}\r\n      </div>\r\n\r\n      {canEdit && !isEditing && (\r\n        <div className=\"absolute top-2 right-2 flex gap-2\">\r\n          <button\r\n            onClick={() => {\r\n              setEditingReviewId(reply.id);\r\n              setEditText(reply.comment ?? \"\");\r\n            }}\r\n            className=\"text-blue-600 hover:text-blue-800\"\r\n            title=\"Редактировать\"\r\n          >\r\n            <PencilSquareIcon className=\"w-5 h-5\" />\r\n          </button>\r\n          <button\r\n            onClick={() => deleteMutation.mutate({ reviewId: reply.id })}\r\n            className=\"text-red-500 hover:text-red-700\"\r\n            title=\"Удалить\"\r\n          >\r\n            <TrashIcon className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;;;AACe,SAAS,MACpB,EACE,KAAK,EACL,WAAW,EACX,eAAe,EACf,kBAAkB,EAClB,QAAQ,EACR,WAAW,EACX,cAAc,EACd,cAAc,EAoBf;IAEH,MAAM,YAAY,oBAAoB,MAAM,EAAE;IAC9C,MAAM,UAAU,aAAa,OAAO,MAAM,MAAM;IAEhD,qBACE,6VAAC;QAAI,WAAU;;0BACb,6VAAC;gBAAI,WAAU;;oBACZ,MAAM,IAAI,CAAC,IAAI,IAAI;oBAAS;oBAAE,MAAM,IAAI,CAAC,OAAO,IAAI;;;;;;;YAGtD,0BACC,6VAAC;gBAAI,WAAU;;kCACb,6VAAC;wBACC,WAAU;wBACV,OAAO;wBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;kCAE7C,6VAAC;wBAAI,WAAU;;0CACb,6VAAC;gCACC,SAAS;oCACP,eAAe,MAAM,CAAC;wCACpB,UAAU,MAAM,EAAE;wCAClB,SAAS;wCACT,QAAQ;oCACV;oCACA,mBAAmB;gCACrB;gCACA,WAAU;0CACX;;;;;;0CAGD,6VAAC;gCACC,SAAS,IAAM,mBAAmB;gCAClC,WAAU;0CACX;;;;;;;;;;;;;;;;;qCAML,6VAAC;gBAAE,WAAU;0BAAsB,MAAM,OAAO,IAAI;;;;;;0BAGtD,6VAAC;gBAAI,WAAU;0BACZ,IAAI,KAAK,MAAM,SAAS,EAAE,kBAAkB;;;;;;YAG9C,WAAW,CAAC,2BACX,6VAAC;gBAAI,WAAU;;kCACb,6VAAC;wBACC,SAAS;4BACP,mBAAmB,MAAM,EAAE;4BAC3B,YAAY,MAAM,OAAO,IAAI;wBAC/B;wBACA,WAAU;wBACV,OAAM;kCAEN,cAAA,6VAAC,sTAAA,CAAA,mBAAgB;4BAAC,WAAU;;;;;;;;;;;kCAE9B,6VAAC;wBACC,SAAS,IAAM,eAAe,MAAM,CAAC;gCAAE,UAAU,MAAM,EAAE;4BAAC;wBAC1D,WAAU;wBACV,OAAM;kCAEN,cAAA,6VAAC,wSAAA,CAAA,YAAS;4BAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;AAMjC"}},
    {"offset": {"line": 720, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 726, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/KRB2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/rerwies/review.tsx"],"sourcesContent":["import { PencilSquareIcon, TrashIcon, FolderPlusIcon } from \"@heroicons/react/24/outline\";\r\nimport Reply from \"./reply\";\r\n\r\nexport default function Review(\r\n  {\r\n    review,\r\n    currentUser,\r\n    replyingTo,\r\n    setReplyingTo,\r\n    replyText,\r\n    setReplyText,\r\n    editingReviewId,\r\n    setEditingReviewId,\r\n    editText,\r\n    setEditText,\r\n    deleteMutation,\r\n    createReplyMutation,\r\n    updateMutation,\r\n    productId,\r\n  }: {\r\n    review: {\r\n      productId: string;\r\n      id: string;\r\n      userId: string;\r\n      createdAt: Date;\r\n      rating: number;\r\n      comment: string | null;\r\n      parentId: string | null;\r\n      user: {\r\n        name: string | null;\r\n        surname: string | null;\r\n        image: string | null;\r\n      };\r\n      replies?: {\r\n        productId: string;\r\n        id: string;\r\n        userId: string;\r\n        createdAt: Date;\r\n        rating: number;\r\n        comment: string | null;\r\n        parentId: string | null;\r\n        user: {\r\n          name: string | null;\r\n          surname: string | null;\r\n          image: string | null;\r\n        };\r\n      }[];\r\n    };\r\n    currentUser: { id: string } | null;\r\n    replyingTo: string | null;\r\n    setReplyingTo: (id: string | null) => void;\r\n    replyText: string;\r\n    setReplyText: (text: string) => void;\r\n    editingReviewId: string | null;\r\n    setEditingReviewId: (id: string | null) => void;\r\n    editText: string;\r\n    setEditText: (text: string) => void;\r\n    deleteMutation: any;\r\n    createReplyMutation: any;\r\n    updateMutation: any;\r\n    productId: string;\r\n  }\r\n) {\r\n  const isEditing = editingReviewId === review.id;\r\n  const canEdit = currentUser?.id === review.userId;\r\n\r\n  return (\r\n    <div className=\"relative p-4 border rounded-lg\">\r\n      {canEdit && (\r\n        <div className=\"absolute top-2 right-2 flex gap-2\">\r\n          <button\r\n            onClick={() => {\r\n              setEditingReviewId(review.id);\r\n              setEditText(review.comment ?? \"\");\r\n            }}\r\n            className=\"text-blue-600 hover:text-blue-800\"\r\n            title=\"Редактировать\"\r\n          >\r\n            <PencilSquareIcon className=\"w-5 h-5\" />\r\n          </button>\r\n          <button\r\n            onClick={() => deleteMutation.mutate({ reviewId: review.id })}\r\n            className=\"text-red-500 hover:text-red-700\"\r\n            title=\"Удалить\"\r\n          >\r\n            <TrashIcon className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex items-center gap-4 mb-2\">\r\n        <div>\r\n          <div className=\"font-semibold\">\r\n            {review.user.name || \"Аноним\"} {review.user.surname || \"\"}\r\n          </div>\r\n          <div className=\"text-yellow-500\">\r\n            {[...Array(5)].map((_, i) => (\r\n              <span key={i}>{i < review.rating ? \"★\" : \"☆\"}</span>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {isEditing ? (\r\n        <div className=\"space-y-2\">\r\n          <textarea\r\n            className=\"w-full border p-2 rounded\"\r\n            value={editText}\r\n            onChange={(e) => setEditText(e.target.value)}\r\n          />\r\n          <div className=\"flex gap-2\">\r\n            <button\r\n              onClick={() => {\r\n                updateMutation.mutate({\r\n                  reviewId: review.id,\r\n                  comment: editText,\r\n                  rating: review.rating,\r\n                });\r\n                setEditingReviewId(null);\r\n              }}\r\n              className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n            >\r\n              Сохранить\r\n            </button>\r\n            <button\r\n              onClick={() => setEditingReviewId(null)}\r\n              className=\"px-3 py-1 bg-gray-300 rounded hover:bg-gray-400\"\r\n            >\r\n              Отмена\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <p className=\"text-gray-700\">{review.comment ?? \"\"}</p>\r\n      )}\r\n\r\n      <div className=\"text-sm text-gray-500 mt-2\">\r\n        {new Date(review.createdAt).toLocaleDateString()}\r\n      </div>\r\n\r\n      <div className=\"mt-2\">\r\n        <button\r\n          onClick={() => setReplyingTo(replyingTo === review.id ? null : review.id)}\r\n          className=\"flex items-center text-blue-600 hover:underline gap-1\"\r\n        >\r\n          <FolderPlusIcon className=\"w-4 h-4\" />\r\n          Ответить\r\n        </button>\r\n      </div>\r\n\r\n      {replyingTo === review.id && (\r\n        <div className=\"mt-2 space-y-2\">\r\n          <textarea\r\n            className=\"w-full border p-2 rounded\"\r\n            value={replyText}\r\n            onChange={(e) => setReplyText(e.target.value)}\r\n          />\r\n          <div className=\"flex gap-2\">\r\n            <button\r\n              onClick={() => {\r\n                if (!currentUser) return;\r\n                createReplyMutation.mutate({\r\n                  productId,\r\n                  comment: replyText,\r\n                  rating: 0,\r\n                  parentId: review.id,\r\n                  userId: currentUser.id,\r\n                });\r\n                setReplyText(\"\");\r\n                setReplyingTo(null);\r\n              }}\r\n              className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n            >\r\n              Отправить\r\n            </button>\r\n            <button\r\n              onClick={() => setReplyingTo(null)}\r\n              className=\"px-3 py-1 bg-gray-300 rounded hover:bg-gray-400\"\r\n            >\r\n              Отмена\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"mt-4 space-y-2 pl-4 border-l border-gray-300\">\r\n        {review.replies?.map((reply) => (\r\n          <Reply\r\n            key={reply.id}\r\n            reply={reply}\r\n            currentUser={currentUser}\r\n            editingReviewId={editingReviewId}\r\n            setEditingReviewId={setEditingReviewId}\r\n            editText={editText}\r\n            setEditText={setEditText}\r\n            deleteMutation={deleteMutation}\r\n            updateMutation={updateMutation}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1008, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1014, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/KRB2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/rerwies/reviews.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { api } from \"~/trpc/react\";\r\nimport Review from \"./review\";\r\n\r\nexport default function Reviews(\r\n  {\r\n    productId,\r\n    currentUser,\r\n    initialReviews,\r\n  }: {\r\n    productId: string;\r\n    currentUser: { id: string } | null;\r\n    initialReviews: {\r\n      productId: string;\r\n      id: string;\r\n      userId: string;\r\n      createdAt: Date;\r\n      rating: number;\r\n      comment: string | null;\r\n      parentId: string | null;\r\n      user: {\r\n        name: string | null;\r\n        surname: string | null;\r\n        image: string | null;\r\n      };\r\n      replies: {\r\n        productId: string;\r\n        id: string;\r\n        userId: string;\r\n        createdAt: Date;\r\n        rating: number;\r\n        comment: string | null;\r\n        parentId: string | null;\r\n        user: {\r\n          name: string | null;\r\n          surname: string | null;\r\n          image: string | null;\r\n        };\r\n      }[];\r\n    }[];\r\n  }\r\n) {\r\n  const { data: reviews = initialReviews, isLoading, refetch } = api.review.getByProduct.useQuery(\r\n    { productId },\r\n    { initialData: initialReviews }\r\n  );\r\n\r\n  const deleteMutation = api.review.delete.useMutation({ onSuccess: () => refetch() });\r\n  const createReplyMutation = api.review.create.useMutation({ onSuccess: () => refetch() });\r\n  const updateMutation = api.review.update.useMutation({ onSuccess: () => refetch() });\r\n\r\n  const [replyingTo, setReplyingTo] = useState<string | null>(null);\r\n  const [replyText, setReplyText] = useState<string>(\"\");\r\n  const [editingReviewId, setEditingReviewId] = useState<string | null>(null);\r\n  const [editText, setEditText] = useState<string>(\"\");\r\n\r\n  if (isLoading) return <div className=\"text-center py-4\">Загрузка отзывов...</div>;\r\n  if (!reviews || reviews.length === 0) return <div className=\"text-center py-4\">Отзывов пока нет</div>;\r\n\r\n  return (\r\n    <div className=\"mt-8 space-y-6\">\r\n      <h2 className=\"text-2xl font-bold\">Отзывы</h2>\r\n      {reviews.map((review) => (\r\n        <Review\r\n          key={review.id}\r\n          review={review}\r\n          currentUser={currentUser}\r\n          replyingTo={replyingTo}\r\n          setReplyingTo={setReplyingTo}\r\n          replyText={replyText}\r\n          setReplyText={setReplyText}\r\n          editingReviewId={editingReviewId}\r\n          setEditingReviewId={setEditingReviewId}\r\n          editText={editText}\r\n          setEditText={setEditText}\r\n          deleteMutation={deleteMutation}\r\n          createReplyMutation={createReplyMutation}\r\n          updateMutation={updateMutation}\r\n          productId={productId}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS,QACtB,EACE,SAAS,EACT,WAAW,EACX,cAAc,EAgCf;IAED,MAAM,EAAE,MAAM,UAAU,cAAc,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,qHAAA,CAAA,MAAG,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,CAC7F;QAAE;IAAU,GACZ;QAAE,aAAa;IAAe;IAGhC,MAAM,iBAAiB,qHAAA,CAAA,MAAG,CAAC,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC;QAAE,WAAW,IAAM;IAAU;IAClF,MAAM,sBAAsB,qHAAA,CAAA,MAAG,CAAC,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC;QAAE,WAAW,IAAM;IAAU;IACvF,MAAM,iBAAiB,qHAAA,CAAA,MAAG,CAAC,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC;QAAE,WAAW,IAAM;IAAU;IAElF,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,oTAAA,CAAA,WAAQ,AAAD,EAAiB;IAC5D,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,oTAAA,CAAA,WAAQ,AAAD,EAAU;IACnD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,oTAAA,CAAA,WAAQ,AAAD,EAAiB;IACtE,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,oTAAA,CAAA,WAAQ,AAAD,EAAU;IAEjD,IAAI,WAAW,qBAAO,6VAAC;QAAI,WAAU;kBAAmB;;;;;;IACxD,IAAI,CAAC,WAAW,QAAQ,MAAM,KAAK,GAAG,qBAAO,6VAAC;QAAI,WAAU;kBAAmB;;;;;;IAE/E,qBACE,6VAAC;QAAI,WAAU;;0BACb,6VAAC;gBAAG,WAAU;0BAAqB;;;;;;YAClC,QAAQ,GAAG,CAAC,CAAC,uBACZ,6VAAC,+IAAA,CAAA,UAAM;oBAEL,QAAQ;oBACR,aAAa;oBACb,YAAY;oBACZ,eAAe;oBACf,WAAW;oBACX,cAAc;oBACd,iBAAiB;oBACjB,oBAAoB;oBACpB,UAAU;oBACV,aAAa;oBACb,gBAAgB;oBAChB,qBAAqB;oBACrB,gBAAgB;oBAChB,WAAW;mBAdN,OAAO,EAAE;;;;;;;;;;;AAmBxB"}},
    {"offset": {"line": 1099, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1105, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/KRB2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/producList/confirmDialog.tsx"],"sourcesContent":["'use client';\r\n\r\nexport default function ConfirmDialog({\r\n  message,\r\n  onConfirm,\r\n  onCancel,\r\n}: {\r\n  message: string;\r\n  onConfirm: () => void;\r\n  onCancel: () => void;\r\n}) {\r\n  return (\r\n    <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50\">\r\n      <div className=\"bg-white p-6 rounded-lg shadow-lg max-w-sm w-full text-center\">\r\n        <p className=\"text-lg font-medium mb-6\">{message}</p>\r\n        <div className=\"flex justify-center gap-4\">\r\n          <button\r\n            onClick={onConfirm}\r\n            className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\"\r\n          >\r\n            Да\r\n          </button>\r\n          <button\r\n            onClick={onCancel}\r\n            className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\"\r\n          >\r\n            Нет\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEe,SAAS,cAAc,EACpC,OAAO,EACP,SAAS,EACT,QAAQ,EAKT;IACC,qBACE,6VAAC;QAAI,WAAU;kBACb,cAAA,6VAAC;YAAI,WAAU;;8BACb,6VAAC;oBAAE,WAAU;8BAA4B;;;;;;8BACzC,6VAAC;oBAAI,WAAU;;sCACb,6VAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;sCAGD,6VAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX"}},
    {"offset": {"line": 1164, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1170, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/KRB2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/producList/editProductForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from \"react\";\r\nimport ConfirmDialog from \"./confirmDialog\";\r\nimport { updateProduct } from \"~/app/api/action/product\";\r\n\r\nexport default function EditProductForm({\r\n  product,\r\n  categories,\r\n  availableImages,\r\n}: {\r\n  product: {\r\n    id: string;\r\n    name: string;\r\n    description: string;\r\n    price: number;\r\n    imageUrl: string;\r\n    categoryId: string;\r\n  };\r\n  categories: {\r\n    id: string;\r\n    name: string;\r\n  }[];\r\n  availableImages: {\r\n    name: string;\r\n    url: string;\r\n  }[];\r\n}){\r\n  const [name, setName] = useState(product.name);\r\n  const [description, setDescription] = useState(product.description);\r\n  const [price, setPrice] = useState(product.price);\r\n  const [imageUrl, setImageUrl] = useState(product.imageUrl);\r\n  const [categoryId, setCategoryId] = useState(product.categoryId);\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setShowConfirm(true);\r\n  };\r\n\r\n  const confirmSave = async () => {\r\n    setShowConfirm(false);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"id\", product.id);\r\n    formData.append(\"name\", name);\r\n    formData.append(\"description\", description);\r\n    formData.append(\"price\", price.toString());\r\n    formData.append(\"imageUrl\", imageUrl);\r\n    formData.append(\"categoryId\", categoryId);\r\n\r\n    await updateProduct(formData);\r\n  };\r\n  const [selectedImages, setSelectedImages] = useState<string[]>([]);\r\n\r\n  const toggleImage = (url: string) => {\r\n    setSelectedImages((prev: string[]) =>\r\n      prev.includes(url)\r\n        ? prev.filter((u) => u !== url)\r\n        : [...prev, url]\r\n    );\r\n  };\r\n  return (\r\n    <form\r\n      onSubmit={handleSubmit}\r\n      className=\"bg-white p-6 rounded shadow-md max-w-2xl mx-auto mb-8 space-y-4\"\r\n    >\r\n      <h2 className=\"text-2xl font-bold mb-4\">Редактировать товар</h2>\r\n\r\n      <div>\r\n        <label htmlFor=\"name\" className=\"label font-semibold\">Название товара</label>\r\n        <input\r\n          id=\"name\"\r\n          className=\"w-full p-2 border rounded\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"description\" className=\"label font-semibold\">Описание</label>\r\n        <textarea\r\n          id=\"description\"\r\n          className=\"w-full p-2 border rounded\"\r\n          value={description}\r\n          onChange={(e) => setDescription(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"price\" className=\"label font-semibold\">Цена</label>\r\n        <input\r\n          id=\"price\"\r\n          type=\"number\"\r\n          className=\"w-full p-2 border rounded\"\r\n          value={price}\r\n          onChange={(e) => setPrice(parseFloat(e.target.value))}\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n              <label className=\"label font-semibold\">Выберите изображения</label>\r\n              <div className=\"grid grid-cols-3 gap-2 mt-2\">\r\n                {availableImages.map((img) => {\r\n                  const isSelected = selectedImages.includes(img.url);\r\n                  return (\r\n                    <div\r\n                      key={img.url}\r\n                      className={`cursor-pointer border-2 rounded-md ${isSelected ? 'border-purple-600' : 'border-gray-300'}`}\r\n                      onClick={() => toggleImage(img.url)}\r\n                    >\r\n                      <img src={img.url} alt={img.name} className=\"w-full h-24 object-cover rounded-md\" />\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n    \r\n              {/* Скрытые поля для отправки */}\r\n              {selectedImages.map((url, idx) => (\r\n                <input key={idx} type=\"hidden\" name=\"imageUrls\" value={url} />\r\n              ))}\r\n            </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"categoryId\" className=\"label font-semibold\">Категория</label>\r\n        <select\r\n          id=\"categoryId\"\r\n          value={categoryId}\r\n          className=\"w-full p-2 border rounded\"\r\n          onChange={(e) => setCategoryId(e.target.value)}\r\n        >\r\n          <option value=\"\">Выберите категорию</option>\r\n          {categories.map((cat) => (\r\n            <option key={cat.id} value={cat.id}>{cat.name}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      <button\r\n        type=\"submit\"\r\n        className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors\"\r\n      >\r\n        Сохранить изменения\r\n      </button>\r\n\r\n      {showConfirm && (\r\n        <ConfirmDialog\r\n          message=\"Вы уверены, что хотите сохранить изменения?\"\r\n          onConfirm={confirmSave}\r\n          onCancel={() => setShowConfirm(false)}\r\n        />\r\n      )}\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1427, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1433, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/KRB2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/producList/editProductWrapper.tsx"],"sourcesContent":[" 'use client';\r\n\r\nimport { Category } from \"@prisma/client\";\r\nimport { useState } from \"react\";\r\nimport EditProductForm from \"./editProductForm\";\r\n\r\n\r\nexport default function EditProductWrapper({\r\n  product,\r\n  categories,\r\n  availableImages,\r\n}: {\r\n  product: any;\r\n  categories: Category[];\r\n  availableImages: any; \r\n}) {\r\n  const [editing, setEditing] = useState(false);\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center mb-6\">\r\n      <div className=\"flex justify-center mt-4\">\r\n        <button\r\n          onClick={() => setEditing((prev) => !prev)}\r\n          className=\"btn btn-primary py-2 px-6 text-lg\"\r\n        >\r\n          {editing ? \"Скрыть форму редактирования\" : \"Редактировать информацию о товаре\"}\r\n        </button>\r\n      </div>\r\n\r\n      {editing && (\r\n        <div className=\"mt-4 w-full max-w-2xl\">\r\n  <EditProductForm product={product} categories={categories} availableImages={availableImages} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAGA;AACA;AAJC;;;;AAOc,SAAS,mBAAmB,EACzC,OAAO,EACP,UAAU,EACV,eAAe,EAKhB;IACC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,oTAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,qBACE,6VAAC;QAAI,WAAU;;0BACb,6VAAC;gBAAI,WAAU;0BACb,cAAA,6VAAC;oBACC,SAAS,IAAM,WAAW,CAAC,OAAS,CAAC;oBACrC,WAAU;8BAET,UAAU,gCAAgC;;;;;;;;;;;YAI9C,yBACC,6VAAC;gBAAI,WAAU;0BACrB,cAAA,6VAAC,2JAAA,CAAA,UAAe;oBAAC,SAAS;oBAAS,YAAY;oBAAY,iBAAiB;;;;;;;;;;;;;;;;;AAK9E"}},
    {"offset": {"line": 1487, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1493, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/KRB2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/producList/deleteProduct.tsx"],"sourcesContent":["\r\n\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { deleteProduct } from \"~/app/api/action/product\";\r\nimport ConfirmDialog from \"./confirmDialog\";\r\n\r\nexport default function DeleteButton({ productId }: { productId: string }) {\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n  const confirmSave = async () => {\r\n    setShowConfirm(false);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"id\", productId);\r\n\r\n    await deleteProduct(formData);\r\n  };\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setShowConfirm(true);\r\n  };\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"flex justify-center mt-4\">\r\n      <input type=\"hidden\" name=\"id\" value={productId} />\r\n      <button\r\n        type=\"submit\"\r\n        className=\"btn btn-error py-2 px-6 text-lg\"\r\n        style={{\r\n          width: \"auto\",\r\n          paddingLeft: \"calc(1.5rem + 140px)\",\r\n          paddingRight: \"calc(1.5rem + 140px)\",\r\n        }}\r\n      >\r\n        Удалить\r\n      </button>\r\n      {showConfirm && (\r\n        <ConfirmDialog\r\n          message=\"Вы уверены, что хотите удалить данный товар?\"\r\n          onConfirm={confirmSave}\r\n          onCancel={() => setShowConfirm(false)}\r\n        />\r\n      )}\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AAJA;;;;;AAMe,SAAS,aAAa,EAAE,SAAS,EAAyB;IACvE,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,oTAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,cAAc;QAClB,eAAe;QAEf,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,MAAM;QAEtB,MAAM,CAAA,GAAA,sIAAA,CAAA,gBAAa,AAAD,EAAE;IACtB;IACA,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,eAAe;IACjB;IACA,qBACE,6VAAC;QAAK,UAAU;QAAc,WAAU;;0BACtC,6VAAC;gBAAM,MAAK;gBAAS,MAAK;gBAAK,OAAO;;;;;;0BACtC,6VAAC;gBACC,MAAK;gBACL,WAAU;gBACV,OAAO;oBACL,OAAO;oBACP,aAAa;oBACb,cAAc;gBAChB;0BACD;;;;;;YAGA,6BACC,6VAAC,yJAAA,CAAA,UAAa;gBACZ,SAAQ;gBACR,WAAW;gBACX,UAAU,IAAM,eAAe;;;;;;;;;;;;AAKzC"}},
    {"offset": {"line": 1560, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1566, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/KRB2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/rerwies/ratingSelector.tsx"],"sourcesContent":["export default function RatingSelector({\r\n  rating,\r\n  setRating,\r\n}: {\r\n  rating: number;\r\n  setRating: (rating: number) => void;\r\n}) {\r\n  return (\r\n    <div className=\"form-control mb-4\">\r\n      <label htmlFor=\"rating\" className=\"label\">\r\n        <span className=\"label-text\">Рейтинг (необязательно)</span>\r\n      </label>\r\n      <select\r\n        id=\"rating\"\r\n        value={rating}\r\n        onChange={(e) => setRating(Number(e.target.value))}\r\n        className=\"select select-bordered w-full\"\r\n      >\r\n        <option value={0}>Не задано</option>\r\n        {[1, 2, 3, 4, 5].map((num) => (\r\n          <option key={num} value={num}>\r\n            {num}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAe,SAAS,eAAe,EACrC,MAAM,EACN,SAAS,EAIV;IACC,qBACE,6VAAC;QAAI,WAAU;;0BACb,6VAAC;gBAAM,SAAQ;gBAAS,WAAU;0BAChC,cAAA,6VAAC;oBAAK,WAAU;8BAAa;;;;;;;;;;;0BAE/B,6VAAC;gBACC,IAAG;gBACH,OAAO;gBACP,UAAU,CAAC,IAAM,UAAU,OAAO,EAAE,MAAM,CAAC,KAAK;gBAChD,WAAU;;kCAEV,6VAAC;wBAAO,OAAO;kCAAG;;;;;;oBACjB;wBAAC;wBAAG;wBAAG;wBAAG;wBAAG;qBAAE,CAAC,GAAG,CAAC,CAAC,oBACpB,6VAAC;4BAAiB,OAAO;sCACtB;2BADU;;;;;;;;;;;;;;;;;AAOvB"}},
    {"offset": {"line": 1632, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1638, "column": 0}, "map": {"version":3,"sources":["file://D%3A/PP_2/KRB2/12345%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F/rater/src/app/_components/rerwies/addreview.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport RatingSelector from \"./ratingSelector\";\r\nimport { api } from \"~/trpc/react\";\r\n\r\nexport default function AddReview({ productId }:{ productId: string}) {\r\n  const { data: session, status } = useSession();\r\n  const router = useRouter();\r\n  const [rating, setRating] = useState<number>(0);\r\n  const [comment, setComment] = useState<string>(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const utils = api.useUtils();\r\n  const createReview = api.review.create.useMutation({\r\n    onSuccess: () => {\r\n      setRating(0);\r\n      setComment(\"\");\r\n      setError(null);\r\n      void utils.review.getByProduct.invalidate({ productId });\r\n    },\r\n    onError: (error) => {\r\n      setError(error.message);\r\n    },\r\n    onSettled: () => {\r\n      setIsSubmitting(false);\r\n    },\r\n  });\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (status === \"unauthenticated\") {\r\n      router.push(\"/auth/signin\");\r\n      return;\r\n    }\r\n\r\n    if (!session?.user?.id) {\r\n      setError(\"Ошибка авторизации. Пожалуйста, войдите снова.\");\r\n      return;\r\n    }\r\n\r\n    if (!comment.trim()) {\r\n      setError(\"Пожалуйста, оставьте комментарий\");\r\n      return;\r\n    }\r\n\r\n    if (rating === 0) {\r\n      setError(\"Пожалуйста, укажите рейтинг\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n\r\n    await createReview.mutateAsync({\r\n      productId,\r\n      userId: session.user.id,\r\n      rating,\r\n      comment,\r\n    });\r\n  };\r\n\r\n  if (status === \"unauthenticated\") {\r\n    return (\r\n      <div className=\"my-8 p-4 max-w-xl mx-auto bg-base-200 rounded-lg shadow-md\">\r\n        <h3 className=\"text-xl font-semibold mb-4\">Оставить отзыв</h3>\r\n        <p className=\"mb-4\">Чтобы оставить отзыв, пожалуйста, войдите в систему.</p>\r\n        <button onClick={() => router.push(\"/auth/signin\")} className=\"btn btn-primary\">\r\n          Войти\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"my-8 p-4 max-w-xl mx-auto bg-base-200 rounded-lg shadow-md\">\r\n      <h3 className=\"text-xl font-semibold mb-4\">Оставить отзыв</h3>\r\n      {error && <p className=\"text-red-500 mb-4\">{error}</p>}\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <div className=\"form-control\">\r\n          <label className=\"label\">\r\n            <span className=\"label-text\">Ваша оценка</span>\r\n          </label>\r\n          <RatingSelector rating={rating} setRating={setRating} />\r\n        </div>\r\n\r\n        <div className=\"form-control\">\r\n          <label htmlFor=\"comment\" className=\"label\">\r\n            <span className=\"label-text\">Ваш отзыв</span>\r\n          </label>\r\n          <textarea\r\n            id=\"comment\"\r\n            value={comment}\r\n            onChange={(e) => setComment(e.target.value)}\r\n            placeholder=\"Расскажите о вашем опыте...\"\r\n            className=\"textarea textarea-bordered h-24\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-control mt-6\">\r\n          <button\r\n            type=\"submit\"\r\n            className={`btn btn-primary ${isSubmitting ? \"loading\" : \"\"}`}\r\n            disabled={isSubmitting}\r\n          >\r\n            {isSubmitting ? \"Отправка...\" : \"Опубликовать отзыв\"}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQe,SAAS,UAAU,EAAE,SAAS,EAAuB;IAClE,MAAM,EAAE,MAAM,OAAO,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,iPAAA,CAAA,aAAU,AAAD;IAC3C,MAAM,SAAS,CAAA,GAAA,iPAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,oTAAA,CAAA,WAAQ,AAAD,EAAU;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,oTAAA,CAAA,WAAQ,AAAD,EAAU;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,oTAAA,CAAA,WAAQ,AAAD,EAAW;IAC1D,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,oTAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,MAAM,QAAQ,qHAAA,CAAA,MAAG,CAAC,QAAQ;IAC1B,MAAM,eAAe,qHAAA,CAAA,MAAG,CAAC,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC;QACjD,WAAW;YACT,UAAU;YACV,WAAW;YACX,SAAS;YACT,KAAK,MAAM,MAAM,CAAC,YAAY,CAAC,UAAU,CAAC;gBAAE;YAAU;QACxD;QACA,SAAS,CAAC;YACR,SAAS,MAAM,OAAO;QACxB;QACA,WAAW;YACT,gBAAgB;QAClB;IACF;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAEhB,IAAI,WAAW,mBAAmB;YAChC,OAAO,IAAI,CAAC;YACZ;QACF;QAEA,IAAI,CAAC,SAAS,MAAM,IAAI;YACtB,SAAS;YACT;QACF;QAEA,IAAI,CAAC,QAAQ,IAAI,IAAI;YACnB,SAAS;YACT;QACF;QAEA,IAAI,WAAW,GAAG;YAChB,SAAS;YACT;QACF;QAEA,gBAAgB;QAChB,SAAS;QAET,MAAM,aAAa,WAAW,CAAC;YAC7B;YACA,QAAQ,QAAQ,IAAI,CAAC,EAAE;YACvB;YACA;QACF;IACF;IAEA,IAAI,WAAW,mBAAmB;QAChC,qBACE,6VAAC;YAAI,WAAU;;8BACb,6VAAC;oBAAG,WAAU;8BAA6B;;;;;;8BAC3C,6VAAC;oBAAE,WAAU;8BAAO;;;;;;8BACpB,6VAAC;oBAAO,SAAS,IAAM,OAAO,IAAI,CAAC;oBAAiB,WAAU;8BAAkB;;;;;;;;;;;;IAKtF;IAEA,qBACE,6VAAC;QAAI,WAAU;;0BACb,6VAAC;gBAAG,WAAU;0BAA6B;;;;;;YAC1C,uBAAS,6VAAC;gBAAE,WAAU;0BAAqB;;;;;;0BAE5C,6VAAC;gBAAK,UAAU;gBAAc,WAAU;;kCACtC,6VAAC;wBAAI,WAAU;;0CACb,6VAAC;gCAAM,WAAU;0CACf,cAAA,6VAAC;oCAAK,WAAU;8CAAa;;;;;;;;;;;0CAE/B,6VAAC,uJAAA,CAAA,UAAc;gCAAC,QAAQ;gCAAQ,WAAW;;;;;;;;;;;;kCAG7C,6VAAC;wBAAI,WAAU;;0CACb,6VAAC;gCAAM,SAAQ;gCAAU,WAAU;0CACjC,cAAA,6VAAC;oCAAK,WAAU;8CAAa;;;;;;;;;;;0CAE/B,6VAAC;gCACC,IAAG;gCACH,OAAO;gCACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;gCAC1C,aAAY;gCACZ,WAAU;gCACV,QAAQ;;;;;;;;;;;;kCAIZ,6VAAC;wBAAI,WAAU;kCACb,cAAA,6VAAC;4BACC,MAAK;4BACL,WAAW,CAAC,gBAAgB,EAAE,eAAe,YAAY,IAAI;4BAC7D,UAAU;sCAET,eAAe,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;AAM5C"}},
    {"offset": {"line": 1863, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}